<?xml version="1.0" encoding="UTF-8"?>
<Window>
	<Sheet>
		<Name>intraday bsc</Name>
		<Pane>
			<ChartID>1048</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("marketscript");\r\n#pragma nocache\r\n#include "C:\\buysellcharts\\buysellcharts\\_intraday.afl"\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("DispMA");\r\nP = ParamField("Field");\r\nType = ParamList("Type", "Simple,Exponential,Double Exponential,Tripple Exponential,Wilders,Weighted");\r\nPeriods = Param("Periods", 30, 2, 300 );\r\nDisplacement = Param("Displacement", 15, -50, 50 );\r\nm = 0;\r\n\r\nif( Type == "Simple" ) \t\t\t\t\tm = MA( P, Periods );\r\nif( Type == "Exponential" ) \t\t\tm = EMA( P, Periods );\r\nif( Type == "Double Exponential" ) \tm = DEMA( P, Periods );\r\nif( Type == "Tripple Exponential" ) \tm = TEMA( P, Periods );\r\nif( Type == "Wilders" ) \t\t\t\tm = Wilders( P, Periods );\r\nif( Type == "Weighted" ) \t\t\t\tm = WMA( P, Periods );\r\n\r\nPlot( m, _DEFAULT_NAME(), ParamColor("Color", ColorCycle), ParamStyle("Style"), 0, 0, Displacement );\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_intraday 7.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>15070.6</Min>
			<Max>15237.2</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>exo</Name>
		<Pane>
			<ChartID>1010</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("marketscript");\r\n#pragma nocache\r\n#include "C:\\buysellcharts\\buysellcharts\\Exo.afl"\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("DispMA");\r\nP = ParamField("Field");\r\nType = ParamList("Type", "Simple,Exponential,Double Exponential,Tripple Exponential,Wilders,Weighted");\r\nPeriods = Param("Periods", 30, 2, 300 );\r\nDisplacement = Param("Displacement", 15, -50, 50 );\r\nm = 0;\r\n\r\nif( Type == "Simple" ) \t\t\t\t\tm = MA( P, Periods );\r\nif( Type == "Exponential" ) \t\t\tm = EMA( P, Periods );\r\nif( Type == "Double Exponential" ) \tm = DEMA( P, Periods );\r\nif( Type == "Tripple Exponential" ) \tm = TEMA( P, Periods );\r\nif( Type == "Wilders" ) \t\t\t\tm = Wilders( P, Periods );\r\nif( Type == "Weighted" ) \t\t\t\tm = WMA( P, Periods );\r\n\r\nPlot( m, _DEFAULT_NAME(), ParamColor("Color", ColorCycle), ParamStyle("Style"), 0, 0, Displacement );\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\Exo 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>15078.5</Min>
			<Max>15404.9</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>mps</Name>
		<Pane>
			<ChartID>1011</ChartID>
			<PercentHeight>100</PercentHeight>
			<Formula>_SECTION_BEGIN("marketscript");\r\n#pragma nocache\r\n#include "C:\\buysellcharts\\buysellcharts\\mps.afl"\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\mps 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>14980.7</Min>
			<Max>15265.4</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT2</Name>
		<Pane>
			<ChartID>1049</ChartID>
			<PercentHeight>85</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-2");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as2.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-2 7.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>35940.1</Min>
			<Max>36739.1</Max>
		</Pane>
		<Pane>
			<ChartID>1052</ChartID>
			<PercentHeight>15</PercentHeight>
			<Formula>_SECTION_BEGIN("MACD");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nPlot( ml = MACD(r1, r2), StrFormat(_SECTION_NAME()+"(%g,%g)", r1, r2), ParamColor("MACD color", colorRed ), ParamStyle("MACD style") );\r\nPlot( sl = Signal(r1,r2,r3), "Signal" + _PARAM_VALUES(), ParamColor("Signal color", colorBlue ), ParamStyle("Signal style") );\r\nPlot( ml-sl, "MACD Histogram", ParamColor("Histogram color", colorDefault ), styleNoTitle | ParamStyle("Histogram style", styleHistogram | styleNoLabel, maskHistogram ) );\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\MACD - Moving Average Convergence Divergence 4.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>-106.526</Min>
			<Max>74.0399</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT3</Name>
		<Pane>
			<ChartID>1037</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-3");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as3.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-3 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>15062.8</Min>
			<Max>15249.7</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT4</Name>
		<Pane>
			<ChartID>1041</ChartID>
			<PercentHeight>85</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-4");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as4.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-4 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177289</MoreFlags>
			<Min>-1817.7</Min>
			<Max>39371.3</Max>
		</Pane>
		<Pane>
			<ChartID>1050</ChartID>
			<PercentHeight>15</PercentHeight>
			<Formula>_SECTION_BEGIN("MACD");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nPlot( ml = MACD(r1, r2), StrFormat(_SECTION_NAME()+"(%g,%g)", r1, r2), ParamColor("MACD color", colorRed ), ParamStyle("MACD style") );\r\nPlot( sl = Signal(r1,r2,r3), "Signal" + _PARAM_VALUES(), ParamColor("Signal color", colorBlue ), ParamStyle("Signal style") );\r\nPlot( ml-sl, "MACD Histogram", ParamColor("Histogram color", colorDefault ), styleNoTitle | ParamStyle("Histogram style", styleHistogram | styleNoLabel, maskHistogram ) );\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\MACD - Moving Average Convergence Divergence 3.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>-105.843</Min>
			<Max>38.1852</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT5</Name>
		<Pane>
			<ChartID>1022</ChartID>
			<PercentHeight>85</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-5");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as5.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-5 2.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>14767.7</Min>
			<Max>15313</Max>
		</Pane>
		<Pane>
			<ChartID>1053</ChartID>
			<PercentHeight>15</PercentHeight>
			<Formula>_SECTION_BEGIN("MACD");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nPlot( ml = MACD(r1, r2), StrFormat(_SECTION_NAME()+"(%g,%g)", r1, r2), ParamColor("MACD color", colorRed ), ParamStyle("MACD style") );\r\nPlot( sl = Signal(r1,r2,r3), "Signal" + _PARAM_VALUES(), ParamColor("Signal color", colorBlue ), ParamStyle("Signal style") );\r\nPlot( ml-sl, "MACD Histogram", ParamColor("Histogram color", colorDefault ), styleNoTitle | ParamStyle("Histogram style", styleHistogram | styleNoLabel, maskHistogram ) );\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\MACD - Moving Average Convergence Divergence 5.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>-47.152</Min>
			<Max>32.3693</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT6</Name>
		<Pane>
			<ChartID>1043</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-6");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as6.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-6 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741855</MoreFlags>
			<Min>35329.7</Min>
			<Max>36426.8</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT7</Name>
		<Pane>
			<ChartID>12</ChartID>
			<PercentHeight>100</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-7");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as7.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_MFI.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741841</MoreFlags>
			<Min>97.9142</Min>
			<Max>99.6452</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>pp</Name>
		<Pane>
			<ChartID>1012</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("marketscript");\r\n#pragma nocache\r\n#include "C:\\buysellcharts\\buysellcharts\\_proplus.afl"\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_proplus 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>97.4723</Min>
			<Max>99.7593</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>option</Name>
		<Pane>
			<ChartID>1013</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("marketscript");\r\n#pragma nocache\r\n#include "C:\\buysellcharts\\buysellcharts\\_options.afl"\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_options 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>96.9118</Min>
			<Max>117.038</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>supertrand</Name>
		<Pane>
			<ChartID>1014</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>\r\n\r\n\r\n_SECTION_BEGIN("SuperTrend");\r\nSetBarsRequired(100000,0);\r\nGraphXSpace = 15;\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\nSetChartBkColor(ParamColor("bkcolor",ColorRGB(0,0, 0)));\r\nGfxSetBkMode(0); \r\nGfxSetOverlayMode(1);\r\nSetBarFillColor(IIf(C&gt;O,ParamColor("Candle UP Color", colorGreen),IIf(C&lt;=O,ParamColor("Candle Down Color", colorRed),colorLightGrey)));\r\nPlot(C,"\\nPrice",IIf(C&gt;O,ParamColor("Wick UP Color", colorDarkGreen),IIf(C&lt;=O,ParamColor("Wick Down Color", colorDarkRed),colorLightGrey)),64,0,0,0,0);\r\n\r\nSetTradeDelays(1,1,1,1);\r\n\r\n_N(Title = StrFormat("{{NAME}} - {{INTERVAL}} {{DATE}} Open %g, Hi %g, Lo %g, Close %g (%.1f%%) {{VALUES}}", O, H, L, C, SelectedValue( ROC( C, 1 ) ) ));\r\n\r\nFactor=Param("Factor",3,1,10,1);\r\nPd=Param("ATR Periods",10,1,100,1);\r\nUp=(H+L)/2+(Factor*ATR(Pd));\r\nDn=(H+L)/2-(Factor*ATR(Pd));\r\niATR=ATR(Pd);\r\nTrendUp=TrendDown=Null;\r\ntrend[0]=1;\r\nchangeOfTrend=0;\r\nflag=flagh=0;\r\n\r\nfor (i = 1; i &lt;BarCount; i++) {\r\nTrendUp[i] = Null;\r\nTrendDown[i] = Null;\r\n\r\ntrend[i]=1;\r\n\r\n\r\nif (Close[i]&gt;Up[i-1]) {\r\ntrend[i]=1;\r\nif (trend[i-1] == -1) changeOfTrend = 1;\r\n\r\n}\r\nelse if (Close[i]&lt;Dn[i-1]) {\r\ntrend[i]=-1;\r\nif (trend[i-1] == 1) changeOfTrend = 1;\r\n}\r\nelse if (trend[i-1]==1) {\r\ntrend[i]=1;\r\nchangeOfTrend = 0; \r\n}\r\nelse if (trend[i-1]==-1) {\r\ntrend[i]=-1;\r\nchangeOfTrend = 0;\r\n}\r\n\r\nif (trend[i]&lt;0 &amp;&amp; trend[i-1]&gt;0) {\r\nflag=1;\r\n}\r\nelse {\r\nflag=0;\r\n}\r\n\r\nif (trend[i]&gt;0 &amp;&amp; trend[i-1]&lt;0) {\r\nflagh=1;\r\n}\r\nelse {\r\nflagh=0;\r\n}\r\n\r\nif (trend[i]&gt;0 &amp;&amp; Dn[i]&lt;Dn[i-1]){\r\nDn[i]=Dn[i-1];\r\n}\r\n\r\nif (trend[i]&lt;0 &amp;&amp; Up[i]&gt;Up[i-1])\r\n{ Up[i]=Up[i-1];\r\n}\r\n\r\nif (flag==1)\r\n{ Up[i]=(H[i]+L[i])/2+(Factor*iATR[i]);;\r\n} \r\nif (flagh==1)\r\n{ Dn[i]=(H[i]+L[i])/2-(Factor*iATR[i]);;\r\n}\r\nif (trend[i]==1) {\r\nTrendUp[i]=Dn[i];\r\nif (changeOfTrend == 1) {\r\nTrendUp[i-1] = TrendDown[i-1];\r\nchangeOfTrend = 0;\r\n}\r\n}\r\nelse if (trend[i]==-1) {\r\nTrendDown[i]=Up[i];\r\nif (changeOfTrend == 1) {\r\nTrendDown[i-1] = TrendUp[i-1];\r\nchangeOfTrend = 0;\r\n}\r\n}\r\n} \r\n\r\nPlot(TrendUp,"Trend",colorGreen);\r\nPlot(TrendDown,"Down",colorRed);\r\n\r\nBuy = trend==1;\r\nSell=trend==-1;\r\n\r\nBuy=ExRem(Buy,Sell);\r\nSell=ExRem(Sell,Buy);\r\nShort=Sell;\r\nCover=Buy;\r\n\r\n\r\nBuyPrice=ValueWhen(Buy,C);\r\nSellPrice=ValueWhen(Sell,C);\r\nShortPrice=ValueWhen(Short,C);\r\nCoverPrice=ValueWhen(Cover,C);\r\n\r\n\r\nTitle = EncodeColor(colorWhite)+ "Super Trend" + " - " + Name() + " - " + EncodeColor(colorRed)+ Interval(2) + EncodeColor(colorWhite) +\r\n" - " + Date() +" - "+"\\n" +EncodeColor(colorRed) +"Op-"+O+" "+"Hi-"+H+" "+"Lo-"+L+" "+\r\n"Cl-"+C+" "+ "Vol= "+ WriteVal(V)+"\\n"+ \r\nEncodeColor(colorLime)+\r\nWriteIf (Buy , " GO LONG / Reverse Signal at "+C+" ","")+\r\nWriteIf (Sell , " EXIT LONG / Reverse Signal at "+C+" ","")+"\\n"+EncodeColor(colorYellow)+\r\nWriteIf(Sell , "Total Profit/Loss for the Last Trade Rs."+(C-BuyPrice)+"","")+\r\nWriteIf(Buy , "Total Profit/Loss for the Last trade Rs."+(SellPrice-C)+"","");\r\n\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0, L, Offset=-40);\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorLime, 0,L, Offset=-50); \r\nPlotShapes(IIf(Buy, shapeUpArrow, shapeNone),colorWhite, 0,L, Offset=-45); \r\nPlotShapes(IIf(Short, shapeSquare, shapeNone),colorRed, 0, H, Offset=40);\r\nPlotShapes(IIf(Short, shapeSquare, shapeNone),colorOrange, 0,H, Offset=50); \r\nPlotShapes(IIf(Short, shapeDownArrow, shapeNone),colorWhite, 0,H, Offset=-45);\r\n\r\nTrendSL=IIf(trend==1,TrendUp,TrendDown);\r\n\r\nfor(i=BarCount-1;i&gt;1;i--)\r\n{\r\nif(Buy[i] == 1)\r\n{\r\nentry = C[i];\r\nsig = "BUY";\r\nsl = TrendSL[i];\r\ntar1 = entry + (entry * .0050);\r\ntar2 = entry + (entry * .0092);\r\ntar3 = entry + (entry * .0179);\r\n\r\nbars = i;\r\ni = 0;\r\n}\r\nif(Sell[i] == 1)\r\n{\r\nsig = "SELL";\r\nentry = C[i];\r\nsl = TrendSL[i];\r\ntar1 = entry - (entry * .0050);\r\ntar2 = entry - (entry * .0112);\r\ntar3 = entry - (entry * .0212);\r\n\r\n\r\nbars = i;\r\ni = 0;\r\n}\r\n}\r\nOffset = 20;\r\nClr = IIf(sig == "BUY", colorLime, colorRed);\r\nssl = IIf(bars == BarCount-1, TrendSL[BarCount-1], Ref(TrendSL, -1));\r\nsl = ssl[BarCount-1];\r\n\r\n\r\nPlot(LineArray(bars-Offset, tar1, BarCount, tar1,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar2, BarCount, tar2,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar3, BarCount, tar3,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\n\r\n//Plot(LineArray(bars-Offset, sl, BarCount, sl,1), "", colorDarkRed, styleLine|styleLine, Null, Null, Offset);\r\n//Plot(LineArray(bars-Offset, entry, BarCount, entry,1), "", colorGreen, styleLine|styleLine, Null, Null, Offset);\r\n\r\nfor (i=bars; i &lt;BarCount;i++)\r\n{\r\nPlotText(""+sig+"@"+entry, BarCount+1,entry,Null,colorBlue);\r\nPlotText("T1@"+tar1,BarCount+3,tar1,Null,Clr);PlotText("T2@"+tar2,BarCount+3,tar2,Null,Clr);PlotText ("T3@"+tar3,BarCount+3,tar3,Null,Clr);\r\n\r\n}\r\n\r\nmessageboard = ParamToggle("Message Board","Show|Hide",1);\r\nif (messageboard == 1 )\r\n{\r\nGfxSelectFont( "Tahoma", 13, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorWhite );\r\n\r\nif ( sig =="BUY")\r\n{\r\nGfxSelectSolidBrush( colorBlue ); // this is the box background color\r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( colorRed ); // this is the box background color\r\n}\r\npxHeight = Status( "pxchartheight" ) ;\r\nxx = Status( "pxchartwidth");\r\nLeft = 1100;\r\nwidth = 310;\r\nx = 5;\r\nx2 = 290;\r\n\r\ny = pxHeight;\r\n\r\nGfxSelectPen( colorGreen, 1); // broader color\r\nGfxRoundRect( x, y - 98, x2, y , 7, 7 ) ;\r\nGfxTextOut( ( "Supertrend"),13,y-100);\r\nGfxTextOut( (" "),27,y-100);\r\nGfxTextOut( ("Last " + sig + " Signal came " + (BarCount-bars-1) * Interval()/60 + " mins ago"), 13, y-80) ; // The text format location\r\nGfxTextOut( ("" + WriteIf(sig =="BUY",sig + " @ ",sig + " @") + " : " + entry), 13, y-60);\r\nGfxTextOut( ("Trailing SL : " + TrendSL + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"), 13, y-40);\r\n/*GfxTextOut( ("TGT:1 : " + tar1), 13, y -80);\r\nGfxTextOut( ("TGT:2 : " + tar2), 13,y-60);\r\nGfxTextOut( ("TGT:3 : " + tar3), 13,y-40);*/\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 13, y-22);;\r\n\r\n}\r\n\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\Super Trend 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>530.032</Min>
			<Max>551.768</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT1</Name>
		<Pane>
			<ChartID>1051</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-1");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as1.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-1 2.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>533.004</Min>
			<Max>555.504</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>RT8</Name>
		<Pane>
			<ChartID>1044</ChartID>
			<PercentHeight>99</PercentHeight>
			<Formula>_SECTION_BEGIN("RT-Live-8");                                                                                                                                                                                                                                                                                                                         \r\nRTLIVEAFLs();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #include "as8.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //\r\n_SECTION_END();\r\n\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\RT-Live-8 1.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741827</MoreFlags>
			<Min>538.69</Min>
			<Max>549.938</Max>
		</Pane>
	</Sheet>
	<Sheet>
		<Name>Sheet9</Name>
		<Pane>
			<ChartID>1</ChartID>
			<PercentHeight>75</PercentHeight>
			<Formula>_SECTION_BEGIN("Price");\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n_N(Title = StrFormat("{{NAME}} - {{INTERVAL}} {{DATE}} Open %g, Hi %g, Lo %g, Close %g (%.1f%%) Vol " +WriteVal( V, 1.0 ) +" {{VALUES}}", O, H, L, C, SelectedValue( ROC( C, 1 )) ));\r\nPlot( C, "Close", ParamColor("Color", colorDefault ), styleNoTitle | ParamStyle("Style") | GetPriceStyle() ); \r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MA");\r\nP = ParamField("Price field",-1);\r\nPeriods = Param("Periods", 15, 2, 200, 1 );\r\nPlot( MA( P, Periods ), _DEFAULT_NAME(), ParamColor( "Color", colorCycle ), ParamStyle("Style", styleLine | styleNoLabel ) | styleNoRescale ); \r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Mid MA");\r\nP = ParamField("Price field",-1);\r\nPeriods = Param("Periods", 45, 2, 300, 1 );\r\nPlot( MA( P, Periods ), _DEFAULT_NAME(), ParamColor( "Color", colorCycle ), ParamStyle("Style", styleHidden | styleLine | styleNoLabel ) | styleNoRescale ); \r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Long MA");\r\nP = ParamField("Price field",-1);\r\nPeriods = Param("Periods", 100, 2, 400, 1 );\r\nPlot( MA( P, Periods ), _DEFAULT_NAME(), ParamColor( "Color", colorCycle ), ParamStyle("Style", styleHidden | styleLine | styleNoLabel ) | styleNoRescale ); \r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("BBands");\r\nP = ParamField("Price field",-1);\r\nPeriods = Param("Periods", 15, 2, 100, 1 );\r\nWidth = Param("Width", 2, 0, 10, 0.05 );\r\nColor = ParamColor("Color", colorLightGrey );\r\nColor = ColorBlend( Color,  GetChartBkColor(), 0.5 );\r\nStyle = ParamStyle("Style", styleLine | styleNoLabel ) | styleNoRescale;;\r\nPlot( bbt = BBandTop( P, Periods, Width ), "BBTop" + _PARAM_VALUES(), Color, Style ); \r\nPlot( bbb = BBandBot( P, Periods, Width ), "BBBot" + _PARAM_VALUES(), Color, Style ); \r\nPlotOHLC( bbt, bbt, bbb, bbb, "", ColorBlend( Color, GetChartBkColor(), 0.7 ), styleNoLabel | styleCloud | styleNoRescale, Null, Null, Null, -1 );\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Price Interpretation");\r\nmovshort = ParamField("Short Time MA", 8 );\r\nmovmed = ParamField("Mid Time MA", 9 );\r\nmovlong = ParamField("Long Time MA", 10 );\r\nbtop = ParamField("BBTop", 11 );\r\nbbot = ParamField("BBBottom", 12 );\r\nif( Status("action") == actionCommentary )\r\n{\r\nwidth = btop - bbot;\r\nlslop = LinRegSlope( C, 30 ) + 100;\r\nlslo = LLV( lslop, 90 );\r\nlshi = HHV( lslop, 90 );\r\nlswidth = lshi - lslo;\r\ntrend = 100*( lslop - lslo )/lswidth;\r\n\r\nmawidth = MA( width, 100 );\r\nrelwidth = 100*(width - mawidth)/mawidth;\r\n\r\n_N( tname = Name()+"("+FullName()+")" );\r\n\r\nprintf("Price and moving averages:\\n");\r\nprintf( tname + " has closed " + WriteIf( C &gt; movshort, "above" , "below" ) + " its Short time moving average. ");\r\n\r\nprintf("\\nShort time moving average is currently " + WriteIf( movshort &gt; movmed, "above", "below") + " mid-time, AND " + WriteIf( movshort &gt; movlong, "above", "below" ) + " long time moving averages.");\r\n\r\nprintf("\\nThe relationship between price and moving averages is: "+\r\nWriteIf( C &gt; movshort AND movshort &gt; movmed, "bullish",\r\nWriteIf( C &lt; movshort AND movshort &lt; movmed, "bearish", "neutral" ) ) + " in short-term, and "+\r\nWriteIf( movshort &gt; movmed AND movmed &gt; movlong , "bullish",\r\nWriteIf( movshort &lt; movmed AND movmed &lt; movlong, "bearish", "neutral" ) ) + " in mid-long term. ");\r\n\r\nprintf("\\n\\nBollinger Bands:\\n");\r\nprintf(tname+ " has closed " + \r\nWriteIf( C &lt; bbot, "below the lower band by " +\r\nWriteVal( 100 *( bbot-C )/ width, 1.1 ) + "%%. " +\r\nWriteIf( trend &lt; 30, " This combined with the steep downtrend can suggest that the downward trend in prices has a good chance of continuing.  However, a short-term pull-back inside the bands is likely.",\r\nWriteIf( trend &gt; 30 AND trend &lt; 70, "Although prices have broken the lower band and a downside breakout is possible, the most likely scenario for "+tname+" is to continue within current trading range.", "" ) ), "" ) +\r\n\r\nWriteIf( C &gt; btop, "above the upper band by " +\r\nWriteVal( 100 *( C- btop )/ width, 1.1 ) + "%%. " +\r\nWriteIf( trend &gt; 70, " This combined with the steep uptrend suggests that the upward trend in prices has a good chance of continuing.  However, a short-term pull-back inside the bands is likely.",\r\nWriteIf( trend &gt; 30 AND trend &lt; 70, "Although prices have broken the upper band and a upside breakout is possible, the most likely scenario for "+tname+" is to continue within current trading range.", "" ) ), "" ) +\r\n\r\nWriteIf( C &lt; btop AND ( ( btop - C ) / width ) &lt; 0.5, \r\n"below upper band by " +\r\nWriteVal( 100 *( btop - C )/ width, 1.1 ) + "%%. ", \r\nWriteIf( C &lt; btop AND C &gt; bbot , "above bottom band by " +\r\nWriteVal( 100 *( C - bbot )/ width, 1.1 ) + "%%. ", "" ) ));\r\n\r\nprintf("\\n"+\r\nWriteIf( ( trend &gt; 30 AND trend &lt; 70 AND ( C &gt; btop OR C &lt; bbot ) ) AND abs(relwidth) &gt; 40,\r\n\t\t "This picture becomes somewhat unclear due to the fact that Bollinger Bands are  currently",\r\n\t\t "Bollinger Bands are " )+\t  \r\nWriteVal( abs( relwidth ), 1.1 ) + "%% " +\r\nWriteIf( relwidth &gt; 0, "wider" , "narrower" ) +\r\n" than normal.");\r\n\r\nprintf("\\n");\r\n\r\nprintf(\r\nWriteIf( abs( relwidth ) &lt; 40, "The current width of the bands (alone) does not suggest anything conclusive about the future volatility or movement of prices.","")+\r\nWriteIf( relwidth &lt; -40, "The narrow width of the bands suggests low volatility as compared to " + tname + "'s normal range.  Therefore, the probability of volatility increasing with a sharp price move has increased for the near-term. "+\r\n"The bands have been in this narrow range for " + WriteVal(BarsSince(Cross(-40,relwidth)),1.0) + " bars. The probability of a significant price move increases the longer the bands remain in this narrow range." ,"")+\r\nWriteIf( relwidth &gt; 40, "The large width of the bands suggest high volatility as compared to " + tname + "'s normal range.  Therefore, the probability of volatility decreasing and prices entering (or remaining in) a trading range has increased for the near-term. "+\r\n"The bands have been in this wide range for  " + WriteVal(BarsSince(Cross(relwidth,40)),1.0) + " bars.The probability of prices consolidating into a less volatile trading range increases the longer the bands remain in this wide range." ,""));\r\n\r\nprintf("\\n\\nThis commentary is not a recommendation to buy or sell. Use at your own risk.");\r\n}\r\n_SECTION_END();\r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_Price.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1073741835</MoreFlags>
			<Min>539.418</Min>
			<Max>549.166</Max>
		</Pane>
		<Pane>
			<ChartID>15</ChartID>
			<PercentHeight>25</PercentHeight>
			<Formula>_SECTION_BEGIN("NVI");\r\n\r\nPlot( n1 = NVI(), _DEFAULT_NAME(), ParamColor("Color", colorCycle ), ParamStyle("Style")  );Plot( n1 = NVI(), "NVI", -8 );\r\n\r\nif( Status("action") == actionCommentary )\r\n{\r\nn2 = MA( n1, 260 );\r\n\r\nprintf("\\nCurrent value of NVI is " + WriteVal( NVI() ));\r\n\r\nprintf("\\nThe interpretation of the NVI assumes that on days with decreased Volume, the 'smart money' is quietly taking positions. Thus, the NVI displays what the smart money is doing by showing price action only when Volume is decreasing. NVI is most usefuly as a bull market indicator." );\r\nprintf("\\n\\nCurrently NVI is "+WriteIf( n1 &gt; n2, "above", "below" )+" its 260 period (one year on daily chart) moving average.");\r\nprintf("\\n"+\r\nWriteIf( n1 &gt; n2, "It crossed above " + \r\nWriteVal( BarsSince( Cross( n1, n2 ) ), 1.0 ) + \r\n" bars ago. Norman Fosback in 'Stock Market Logic' states that the odds of a bull market are 95 out of 100 when the NVI rises above its one-Year moving average.",\r\n"This alone does NOT give any useful hint about the future performance of this security."));\r\n}\r\n\r\n_SECTION_END();\r\n \r\n</Formula>
			<FilePath>Formulas\\Drag-drop\\_NVI.afl</FilePath>
			<Flags>256</Flags>
			<MoreFlags>1342177281</MoreFlags>
			<Min>60.8116</Min>
			<Max>61.5823</Max>
		</Pane>
	</Sheet>
	<Includes>
		<File>
			<Path>C:\\buysellcharts\\buysellcharts\\_intraday.afl</Path>
			<Formula>_SECTION_BEGIN("Trend Identifire");\r\nShow_color = ParamToggle("Display CandleColor", "No|Yes", 1);\r\nr1 = Param( "ColorFast avg", 5, 2, 200, 1 );\r\nr2 = Param( "ColorSlow avg", 10, 2, 200, 1 );\r\nr3 = Param( "ColorSignal avg", 5, 2, 200, 1 );\r\n\r\nPrd1=Param("ATR Period",4,1,20,1);\r\nPrd2=Param("Look Back",7,1,20,1);\r\ngreen = HHV(LLV(L,Prd1)+ATR(Prd1),Prd2);\r\nred = LLV(HHV(H,Prd1)-ATR(Prd1),Prd2);\r\nflowerClose = EMA((Open+High+Low+Close)/4,3) ;\r\nflowerOpen = EMA((Ref(Open,-1) + Ref(flowerClose,-1))/2,3);\r\nTemp = Max(High, flowerOpen);\r\nflowerHigh = EMA(Max(Temp, flowerClose),3);\r\nTemp = Min(Low,flowerOpen);\r\nflowerLow = EMA(Min(Temp, flowerClose),3);\r\n\r\n\r\n\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\nmycolor=IIf(m1&lt;0 AND m1&gt;s1, colorBlue,IIf(m1&gt;0 AND \r\n\r\nm1&gt;s1,colorGreen,IIf(m1&gt;0 AND m1&lt;s1,colorPink,colorRed)));\r\nif(Show_color)\r\n{\r\nColorHighliter = myColor;\r\nSetBarFillColor( ColorHighliter );\r\n}\r\n\r\nbarColor=IIf(C&gt;Green ,colorLime,IIf(C &lt; RED,colorRed,colorWhite));\r\n\r\ncandlepattern=ParamList("Simple Candle Patterm","Heinki Ashi|Candle Stick");\r\n\r\nif(candlepattern=="Heinki Ashi")\r\n{\r\nPlotOHLC( IIf(flowerOpen&lt;flowerClose, flowerOpen, \r\n\r\nflowerClose),flowerHigh,flowerLow,IIf(flowerOpen&lt;flowerClose, flowerClose, \r\n\r\nflowerOpen), "Close", barColor, styleNoTitle | styleCandle);\r\n}\r\n\r\nif(candlepattern=="Candle Stick")\r\n{\r\nPlot( C, "Close", ParamColor("Color", colorDefault ), styleNoTitle | ParamStyle("Style") | GetPriceStyle() ); \r\n}\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("Select Grid");\r\nShowGrid = ParamList("Grid", "Off|Grid_Day|Grid_Week|Grid_Month|Grid_Quarter|Grid_Year",0);\r\ncolor_Grid = ParamColor("Color_Grid",colorWhite);\r\nStyle_Grid = ParamStyle("Style_Grid ",styleHistogram|styleDashed|styleNoRescale|styleOwnScale,maskAll);\r\nswitch (ShowGrid )\r\n{\r\ncase "Grid_Day":\r\nGrid_Day = IIf(Day() != Ref(Day(), -1), 1, 0);\r\nPlot(Grid_Day, "", color_Grid, Style_Grid );\r\nbreak;\r\ncase "Grid_Week":\r\nGrid_Week = IIf(DayOfWeek() &lt; Ref(DayOfWeek(), -1), 1, 0);\r\nPlot(Grid_Week, "", color_Grid, Style_Grid );\r\nbreak;\r\n\r\ncase "Grid_Month":\r\nGrid_Month = IIf(Month() != Ref(Month(),-1), 1, 0); \r\nPlot(Grid_Month, "", color_Grid, Style_Grid );\r\nbreak;\r\ncase "Grid_Year":\r\nGrid_year = IIf(Year() != Ref(Year(),-1), 1, 0); \r\nPlot(Grid_year, "", color_Grid, Style_Grid );\r\nbreak;\r\ncase "Grid_Quarter":\r\nLastDayofQuarter = Month() != Ref(Month(), 1)\r\nAND (Month() == 3 OR Month() == 6 OR Month() == 9 OR Month() == 12);\r\nLast_Quarter = IIf(Ref(LastDayofQuarter,-1), 1, 0);\r\nPlot(Last_Quarter, "", color_Grid, Style_Grid);\r\nbreak;\r\ncase "Off": 0;\r\nbreak;\r\n}\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Breakout");\r\n Buuyperiods=Param("Breakout periods best is usually 18",5,1,100,1,1);\r\n Seellperiods=Param("Exit Breakout",5,1,100,1,1);\r\n\r\n HaClose =EMA((O+H+L+C)/4,3); // Woodie \r\n //HaClose =(O+H+L+C)/4; \r\n HaOpen = AMA( Ref( HaClose, -1 ), 0.5 ); \r\n HaHigh = Max( H, Max( HaClose, HaOpen ) ); \r\n HaLow = Min( L, Min( HaClose, HaOpen ) ); \r\n Buuy= C&gt;Ref(HHV(High,Buuyperiods),-1) ;\r\n Seell= C&lt;Ref(LLV(Low,Seellperiods),-1);\r\n\r\n /* exrem is one method to remove surplus strade signals. It removes excessive signals of arrow */\r\n Buuy = ExRem(Buuy, Seell);\r\n Seell = ExRem(Seell, Buuy);\r\n\r\n PlotShapes( IIf( Buuy, shapeUpTriangle, shapeNone ), colorGreen, layer = 0,yposition = HaLow, offset = -30);\r\n //PlotShapes( IIf( Buy, shapeSmallCircle, shapeNone ), colorWhite, layer = 0,yposition = HaLow, offset = -8);\r\n\r\n PlotShapes( IIf( Seell, shapeDownTriangle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = -30);\r\n //PlotShapes( IIf( Sell, shapeSmallCircle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = -8);\r\n\r\n _SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("PFE");\r\n\r\npds=10; \r\nx=sqrt((ROC(C,9)*ROC(C,9))+100);\r\ny=Sum(sqrt((ROC(C,1)* ROC(C,1))+1),pds);\r\nz=(x/y);\r\npfe=EMA(IIf(C&gt;Ref(C,-9),z,-z)*100,5);\r\n\r\nrsidn=pfe &lt;-10 AND pfe&lt;Ref(pfe,-1);\r\nrsiup=pfe &gt;10 AND pfe&gt;Ref(pfe,-1);\r\n\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,90,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(90,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue ); \r\n\r\n\r\n _SECTION_END();\r\n\r\ny = Status( "pxchartheight" );\r\n\r\nGfxRoundRect( 400,y-20,210,y-180, 50, 50 );\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n\r\n_SECTION_BEGIN("Schaff Trend Cycle");\r\n/*\r\nPorted directly from original STC Tradestation code\r\nresults differ from other Amibroker versions that are not directly on original EasyLanguage code\r\nhttp://mediaserver.fxstreet.com/Reports/99afdb5f-d41d-4a2c-802c-f5d787df886c/ebfbf387-4b27-4a0f-848c-039f4ab77c00.pdf\r\n*/\r\nMA1=23;\r\nMA2=50;\r\nTCLen=10;\r\nMA1=Param("ShortMACDLen",23,5,36);\r\nMA2=Param("LOngMACDLen",50,10,100);\r\nTCLen=Param("TCLen(StochPeriod)",10,5,20);\r\nFactor=.5;\r\n//Calculate a MACD Line\r\nXMac = MACD(MA1,MA2) ; // MACD in Amibroker always uses Close for MACD calculation\r\n\r\n//1st Stochastic: Calculate Stochastic of a MACD\r\nValue1 = LLV(XMac, TCLen);\r\nValue2 = HHV(XMac, TCLen) - Value1;\r\n\r\n//Frac1=1; // prime Frac1 to a default of 1\r\n//Frac1 = IIf(Value2 &gt; 0, ((XMac - Value1) / Value2) * 100, Ref(FRAC1,-1));\r\n// have to "prime" first value so that reference to "i-1" does not result in subscript out of range\r\n// since MACD for both periods is not defined until MA2 period, 0 seems to be mathematically correct priming value\r\nfrac1=0;\r\nfor (i = 1; i &lt; BarCount; i++) {\r\nif (Value2[i] &gt; 0) {\r\n\tfrac1[i] = ((XMac[i] - Value1[i])/Value2[i])*100;\r\n\t}\r\nelse {\r\n\tfrac1[i]= frac1[i-1];\r\n\t}\r\n}\r\n\r\n//Smoothed calculation for %FastD of MACD\r\n\r\nPF[0]=frac1[0]; \r\nPF[1]=frac1[1];\r\nfor (i = 2; i &lt; BarCount; i++) {\r\n\tPF[i]=PF[i-1]+(Factor*(frac1[i]-PF[i-1]));\r\n}\r\n\r\n\r\n//2nd Stochastic: Calculate Stochastic of Smoothed Percent FastD, above.\r\nValue3 = LLV(PF, TCLen);\r\nValue4 = HHV(PF, TCLen) - Value3;\r\n\r\n//%FastK of PF\r\n/*\r\nFrac2=1;\r\nFrac2 = IIf(Value4 &gt; 0, ((PF - Value3) / Value4) * 100, Ref(FRAC2,-1));\r\n*/\r\n\r\nfrac2[0]=0;\r\nfor (i = 1; i &lt; BarCount; i++) {\r\n\tif (Value4[i] &gt; 0 ) {\r\n\t\tfrac2[i]=((PF[i] - Value3[i])/Value4[i])*100;\r\n\t}\r\n\telse {\r\n\t\tfrac2[i]=frac2[i-1];\r\n\t}\r\n}\r\n\r\n//Smoothed calculation for %FastD of PF\r\nPFF[0]=frac2[0];\r\nPFF[1]=frac2[1];\r\nfor (i = 2; i &lt; BarCount; i++) {\r\n\tPFF[i]=PFF[i-1]+(Factor*(frac2[i]-PFF[i-1]));\r\n}\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n rsidn=pff &lt;2;\r\n rsiup=pff &gt;98;\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,120,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(120,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n y = Status( "pxchartheight" );\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n GfxRoundRect( 390,y-30,220,y-170, 50, 50 );\r\n\r\n _SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("rsi");\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n rsidn=RSI(7) &lt;30;\r\n rsiup=RSI(7) &gt;70;\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,150,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(150,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n\r\n y = Status( "pxchartheight" );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxRoundRect( 380,y-40,230,y-160, 50, 50 );\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n _SECTION_BEGIN("Rays");\r\n\r\n //FT=ParamColor("FT", colorRed );\r\n\r\n Pp1=3;\r\n Pp2=2;\r\n\r\n CS33=HHV(LLV(flowerHigh,Pp1)-ATR(Pp2),4); \r\n CR33=HHV(LLV(flowerHigh,Pp1)-ATR(Pp2),5);\r\n\r\n AtrupTrendCond1 = flowerClose&gt; CS33 ;\r\n AtrdnTrendCond1 =CS33&gt;flowerClose ;\r\n\r\n\r\n ATRup = WriteIf(AtrupTrendCond1,"atrup", "");\r\n ATRdown= WriteIf( AtrdnTrendCond1,"atrdn", "");\r\n\r\n if ( ATRup =="atrup")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,180,0) ); \r\n\r\n }\r\n else\r\n\r\n if (ATRdown =="atrdn")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(180,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( ATRdown =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n\r\n y = Status( "pxchartheight" );\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\nGfxRoundRect( 370,y-50,240,y-150, 50, 50 );\r\n\r\n\r\n\r\n\r\n _SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("Exit_Beast-3");\r\n\r\n //GT=ParamColor("GT", colorRed );\r\n\r\n EntrylookbackPeriod=10;\r\n EntryATRperiod=1.9;\r\n EntrySig = C &gt; ( LLV( flowerLow, EntrylookbackPeriod ) + EntryATRperiod * ATR( 10 ) );\r\n ExitSig = C &lt; ( HHV( flowerHigh, EntrylookbackPeriod ) -EntryATRperiod * ATR( 10 ) );\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n EntryB = WriteIf( EntrySig,"eu", "");\r\n ExitB = WriteIf( ExitSig,"ed", "");\r\n\r\n if ( EntryB =="eu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,210,0) ); //\r\n\r\n }\r\n else\r\n\r\n if ( ExitB =="ed")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(210,0,0)); //\r\n\r\n }\r\n\r\n else\r\n\r\n if ( ExitB =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n y = Status( "pxchartheight" );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\nGfxSelectPen( colorBlue, 1 ); // broader color\r\nGfxRoundRect( 360,y-60,250,y-140, 50, 50 );\r\n\r\n\r\n// changing the value of x,y,rad x-70, y-90, rad-24\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n _SECTION_BEGIN("CCI9-2");\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n ccidn=CCI(8) &lt; 0;\r\n cciup=CCI(9) &gt; 0;\r\n\r\n\r\n ccresult1 = WriteIf( cciup,"cu", "");\r\n ccresult2 = WriteIf( ccidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( ccresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,240,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( ccresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(240,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( ccresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n y = Status( "pxchartheight" );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\nGfxRoundRect( 350,y-70,260,y-130, 50, 50 );\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n\r\n _SECTION_BEGIN("%BB7-1");\r\n\r\n //IT=ParamColor("IT", colorRed );\r\n p=7;\r\n x=((C+2*StDev(C,p)-MA(C,p))/(4*StDev(C,p)))*100;\r\n bbdown= x &lt; 40;\r\n bbup= x &gt; 40;\r\n\r\n bbresult1 = WriteIf( bbup,"bu", "");\r\n bbresult2 = WriteIf( bbdown,"bd", "");\r\n bbresult3 = WriteIf( C,"bearishrevers", "");\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( bbresult1 =="bu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(62,255,62) ); \r\n\r\n }\r\n else\r\n\r\n if ( bbresult2 =="bd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(255,62,62) ); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( bbresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n y = Status( "pxchartheight" );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\n\r\nGfxRoundRect( 340,y-80,270,y-120, 50, 50 );\r\n\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n \r\n x = 300;\r\n x2 = 200;\r\n\r\n y = Status( "pxchartheight" );\r\nGfxSelectSolidBrush( colorBlue );\r\nGfxSelectPen( colorWhite, 1); // broader color\r\nGfxRoundRect( 515,  y - 140, 410,y - 50 ,7 , 7 ) ;\r\n\r\n\r\n\r\n_SECTION_BEGIN("MACDHIGHBULLISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&gt;0 AND m1&gt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\nGfxCircle( 425,y-70,10 );\r\n\r\n_SECTION_END();\r\n\r\n\r\nrsidn=m1&lt;0 AND m1&gt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\nGfxCircle( 450,y-70, 10);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MACDLOWHBEARISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&gt;0 AND m1&lt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(225,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\nGfxCircle(475,y-70,10);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MACDHIGHHBEARISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\nrsidn=m1&lt;0 AND m1&lt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(225,0,0)); \r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( colorDarkTeal ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\nGfxCircle( 500,y-70,10 );\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\n_SECTION_BEGIN("traing sl");\r\n\r\nfunction vstop_func(trBull,trBear)\r\n{\r\n\ttrailArray[ 0 ] = C[ 0 ]; // initialize\r\n\tfor( i = 1; i &lt; BarCount; i++ )\r\n\t{\r\n\t\tprev = trailArray[ i - 1 ];\r\n \r\n\t\tif (C[ i ] &gt; prev AND C[ i - 1 ] &gt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = Max(prev,C[ i ] - trBull[ i ]);\r\n\t\t}\r\n\t\telse if (C[ i ] &lt; prev AND C[ i - 1 ] &lt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = Min(prev,C[ i ] + trBear[ i ]);\r\n\t\t}\r\n\t\telse if (C[ i ] &gt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = C[ i ] - trBull[ i ];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = C[ i ] + trBear[ i ];\t\r\n\t\t}\r\n\t}\r\n\treturn trailArray;\r\n}\r\n\r\nper = Param("per",20, 1, 150, 1);\r\nmultBull = Param("multBull",2, 1, 4, 0.05);\r\nmultBear = Param("multBear",2, 1, 4, 0.05);\r\n\r\ntrBull = multBull * ATR(per);\r\ntrBear = multBear * ATR(per);\r\n\r\ntrailArray = vstop_func(trBull,trBear);\r\ns0=trailArray;\r\n\r\ns1= s0 &gt; C ;\r\ns2= s0 &lt;C ;\r\nccresult1 = WriteIf( s1,"cu", "");\r\n ccresult2 = WriteIf( s2,"cd", "");\r\n\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorRed);\r\nGfxSetTextColor( ParamColor("Color",colorRed) );\r\nHor=Param("Horizontal Position",30,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\n\r\n\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("traing s2");\r\n\r\ns0=trailArray;\r\n\r\ns1= s0 &gt; C ;\r\ns2= s0 &lt;C ;\r\nccresult1 = WriteIf( s1,"cu", "");\r\n ccresult2 = WriteIf( s2,"cd", "");\r\n\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("buycircle");\r\nGfxSelectFont( "Arial", 10, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorBlue );\r\nGfxSelectPen( colorBlue, 1 );\r\nif ( ccresult2 =="cd")\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,255,0) ); \r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,0,94) );\r\n} \r\n\r\nGfxCircle( 435,y-112,20 );\r\n\r\n_SECTION_END();\r\n_SECTION_BEGIN("sellcircle");\r\nGfxSelectFont( "Arial", 10, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorBlue );\r\nGfxSelectPen( colorBlue, 1 );\r\nif ( ccresult1 =="cu")\r\n{\r\nGfxSelectSolidBrush( ColorRGB(255,0,0) ); \r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,0,94) );\r\n} \r\n\r\nGfxCircle( 490,y-112,20 );\r\n_SECTION_END();\r\n\r\n\r\n\r\n/*_SECTION_BEGIN("RIGHT GUIDE_PriceChart");\r\nTimeFrameSet(inDaily);\r\nDayHigh = LastValue(H);\r\nDayLow = LastValue(L);\r\nTimeFrameRestore();\r\nTitle = Date() + strWeekday = StrMid("---SUNDAY---MONDAY--TUESDAYWEDNESDAY-THURSDAY--FRIDAY--SATURDAY", SelectedValue(DayOfWeek())*9,9) + ", Op=" + Open + ", Hi=" + High + ", Lo=" + Low + ", LTP=" + Close + ", Change= " +\r\n SelectedValue( ROC( C, 1 ) ) + "%" + "\\n Today`s High=" + DayHigh + ", Today`s Low=" + DayLow + "  Trading System" ;\r\n_SECTION_END();\r\n*/\r\n\r\n _SECTION_BEGIN("Magnified Market Price");\r\nFS=Param("Font Size",30,30,100,1);\r\nGfxSelectFont("Arial", FS, 700, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor( ParamColor("Color",colorWhite) );\r\nHor=Param("Horizontal Position",100,800,800,800);\r\nVer=Param("Vertical Position",100,27,27,27);\r\nGfxTextOut(""+C,Hor+250 , Ver-53 );\r\nYC=TimeFrameGetPrice("C",inDaily,-1);\r\nDD=Prec(C-YC,2);\r\nxx=Prec((DD/YC)*100,2);\r\nGfxSelectFont("Arial", 12, 700, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor(ParamColor("Color",colorYellow) );\r\nGfxTextOut(""+DD+" ("+xx+"%)", Hor+250, Ver-1 );\r\n_SECTION_END();\r\n\r\n _SECTION_BEGIN("Right Functions");\r\n\r\n\r\n function HAI_F4(no)\r\n {\r\n prev=AMA2(C,1,0);\r\n d=IIf(C&gt;Ref(Max(Max(H,Ref(H,-20)),Max(Ref(H,-10),Ref(H,-15))),-1),Min(Min(L,Ref(L,-20)),Min(Ref(L,-10),Ref(L,-15))),\r\n IIf(C&lt;Ref(Min(Min(L,Ref(L,-20)),Min(Ref(L,-10),Ref(L,-15))),-1),Max(Max(H,Ref(H,-20)),Max(Ref(H,-10),Ref(H,-15))),PREV));\r\n a=Cross(Close,d);\r\n b=Cross(d,Close);\r\n return (IIf(BarsSince(a)&lt;BarsSince(b),1,0));\r\n }\r\n\r\n function HAI_F5(no)\r\n {\r\n state = HAI_F4(no);\r\n s=state&gt;Ref(state,-1);\r\n ss=state&lt;Ref(state,-1);\r\n\r\n return (state==Ref(state,-1));\r\n }\r\n\r\n\r\n function HAI_F6(p,n,s,m)\r\n {\r\n return (PDI(p)&gt;MDI(n)AND Signal(s)&lt;MACD(m));\r\n }\r\n\r\n function HAI_F7(p,n,s,m)\r\n {\r\n return (MDI(n)&gt;PDI(p)AND Signal(s)&gt;MACD(m));\r\n }\r\n\r\n\r\n _SECTION_END();\r\n \r\n\r\n_SECTION_BEGIN("trending ribbon");\r\nuptrend=PDI()&gt;MDI()AND Signal()&lt;MACD();\r\ndowntrend=MDI()&gt;PDI()AND Signal()&gt;MACD();\r\n\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("Swing");\r\n\r\n no = 22;\r\n res=HHV(H,no);\r\n sup=LLV(L,no);\r\n avd=IIf(C&gt;Ref(res,-1),1,IIf(C&lt;Ref(sup,-1),-1,0));\r\n avn=ValueWhen(avd!=0,avd,1);\r\n supres=IIf(avn==1,sup,res);\r\n \r\n sloss = s0;\r\n a=Cross(C,supres);\r\n b=Cross(supres,C);\r\n state = HAI_F4(no);\r\n sss = HAI_F5(no);\r\n uptrend = HAI_F6(20,10,29,22);\r\n downtrend = HAI_F7(20,10,29,13);\r\n style = a * styleStaircase + b * styleStaircase;\r\n PlotShapes(a,style, IIf(a,colorGreen,colorRed), 0, IIf(a,Low,High));\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n _SECTION_BEGIN("Rightguide");\r\n Buy = a;\r\n Sell = b;\r\n\r\nBuy = ExRem(Buy, Sell);\r\n Sell = ExRem(Sell, Buy);\r\n\r\nCover = a;\r\nShort = b;\r\nCover = ExRem(Buy, Sell);\r\nShort = ExRem(Sell, Buy);\r\nTurnedUp=Nz(StaticVarGet("TurnedUp"));\r\nTurnedDown=Nz(StaticVarGet("TurnedDown"));\r\nSoundON = ParamToggle("Sound","Off|On",1); \r\n   \r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0, L, Offset=-10);\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorLime, 0,L, Offset=-20);                      \r\nPlotShapes(IIf(Buy, shapeUpArrow, shapeNone),colorWhite, 0,L, Offset=-15); \r\nPlotShapes(IIf(Sell, shapeSquare, shapeNone),colorRed, 0, H, Offset=20);\r\nPlotShapes(IIf(Sell, shapeSquare, shapeNone),colorOrange, 0,H, Offset=30);                      \r\nPlotShapes(IIf(Sell, shapeDownArrow, shapeNone),colorWhite, 0,H, Offset=-25);\r\n\r\n dist =0.5* ATR(10);\r\ndist1 = 2*ATR(10);\r\n for (i=0; i&lt;BarCount; i++) {\r\n if ( SoundON==True &amp;&amp; !TurnedUp &amp;&amp; Buy[i] &amp;&amp; i==BarCount-1 ){\r\n PlotText("Buy:" + C[ i ], i, L[ i ]-3*dist[i], colorWhite, colorGreen);\r\n Say("Attention please, Buy call, Generated");\r\n TurnedUp=StaticVarSet("TurnedUp",1);\r\n TurnedDown=StaticVarSet("TurnedDown",0);\r\n }\r\nif ( Cover[i] )\r\n PlotText("Buy:" + C[ i ], i, L[ i ]-3*dist[i], colorWhite, colorGreen);\r\n\r\n\r\n if ( SoundON==True &amp;&amp; !TurnedDown &amp;&amp; Sell[i] &amp;&amp; i==BarCount-1 ){\r\n  PlotText("Sell:" + C[ i ], i, H[ i ]+3*dist[i], colorWhite, colorRed);\r\n  Say("Attention please, Sell call, Generated");\r\n  TurnedUp=StaticVarSet("TurnedUp",0);\r\n  TurnedDown=StaticVarSet("TurnedDown",1);\r\n }\r\n if ( Short[i] )\r\n PlotText("Sell:" + C[ i ], i, H[ i ]+3*dist[i], colorWhite, colorRed);\r\n }\r\n\r\n\r\nAlertIf( Buy, "", "BUY @ " + C, 1 );\r\nAlertIf( Sell, "", "SELL @ " + C, 2 );\r\n//AlertIf( Buy, "EMAIL", "A sample alert on "+FullName(), 1 );\r\n//AlertIf( Sell, "EMAIL", "A sample alert on "+FullName(), 2 );\r\nSetPositionSize(100,spsShares);\r\n _SECTION_END();\r\n\r\n\r\n\r\n //d = Close &gt; Ref( ChandelierHL(ATR(3),20), -1);\r\n //e =Close &lt; Ref( ChandelierHL(ATR(3),20), -1);\r\n //f = Close &lt; Ref( ChandelierHL(ATR(3),20), -1);\r\n //g = Close &gt; Ref( ChandelierHL(ATR(3),20), -1);\r\n\r\nBuuy = a AND uptrend ;\r\n Shorrt = b AND downtrend ;\r\n Seell = b AND downtrend ;\r\n Coveer = a AND uptrend;\r\n\r\n Buuy=ExRem(Buy,Sell);\r\n Seell=ExRem(Sell,Buy);\r\n Coveer=ExRem(Cover,Short);\r\n Shorrt=ExRem(Short,Cover);\r\n\r\n Filter=Buy OR Sell;\r\n Filter= Cover OR Short;\r\n\r\n AddColumn( Buy, "Buy", 1);\r\n AddColumn(Sell, "Sell", 1);\r\n AddColumn(Close,"Close",1.2);\r\n AddColumn(Volume,"Volume",1.0);\r\n\r\n\r\n\r\n //Plot(sloss,"Swing",colorYellow,styleStaircase);\r\n\r\n //SetChartBkGradientFill( ParamColor("BgTop", ColorRGB( 172,172,172 )),\r\n\r\n //ParamColor("BgBottom", ColorRGB( 172,172,172 )),ParamColor("titleblock",ColorRGB( 172,172,172 )));\r\n //Alerts\r\n\r\n\r\n GraphXSpace = 5;\r\n\r\n /* -------------------------------------------------------------------------------------- */\r\n\r\n //SetChartBkColor(colorWhite);\r\n SetChartOptions(0,chartShowArrows|chartShowDates);\r\n\r\n /* -------------------------------------------------------------------------------------- */\r\n ////////////////////////////////////////////////////////////////////////////////////////////////\r\n messageboard = ParamToggle("Message Board","Show|Hide",0);\r\n showsl = ParamToggle("Stop Loss Line", "Show|Hide", 0);\r\n\r\n style = a * styleStaircase + b * styleStaircase;\r\n\r\n PlotShapes(a,style, IIf(a,colorGreen,colorRed), 0, IIf(a,Low,High));\r\n if (showsl == 0) \r\n Plot(sloss,"",colorYellow,styleLine |styleDashed|styleThick);\r\n //exitlong = Cross(sloss, H);\r\n //PlotShapes(exitlong * shapeNone, colorBlack,0,H,-10);\r\n //exitshort = Cross(L, sloss);\r\n //PlotShapes(exitshort * shapeNone, colorBlack,0,L,-15);\r\n\r\n //Buy = exitshort;\r\n //Sell = exitlong;\r\n //Short = Sell;\r\n //Cover = Buy;\r\n Buy = ExRem(Buy,Sell);\r\n Sell = ExRem(Sell,Buy);\r\n //Short = ExRem(Short, Cover);\r\n //Cover = ExRem(Cover, Short);\r\n AlertIf( Buy, "", "BUY @ " + C, 1 );\r\n AlertIf( Sell, "", "SELL @ " + C, 2 );\r\n\r\n for (i=BarCount-1; i&gt;1; i--) {\r\n if (Buy[i] == 1) {\r\n entry =C[i];\r\n sig = "BUY";\r\n sl = sloss[i];\r\n tar1 = entry + (entry * .0036);\r\n tar2 = entry + (entry * .0044);\r\n tar3 = entry + (entry * .0054);\r\n bars = i;\r\n i = 0;\r\n }\r\n if (Sell[i] == 1) {\r\n sig = "SELL";\r\n entry = C[i];\r\n sl = sloss[i];\r\n tar1 = entry - (entry * .0036);\r\n tar2 = entry - (entry * .0045);\r\n tar3 = entry - (entry * .0053);\r\n bars = i;\r\n i = 0;\r\n }\r\n }\r\n\r\n Offset = 20;\r\n Clr = IIf(sig == "BUY", colorLime, colorRed);\r\n ssl = IIf(bars == BarCount-1, sloss[BarCount-1], Ref(sloss, -1));\r\n sl = ssl[BarCount-1];\r\n\r\n printf("Last " + sig + " Signal came " + (BarCount-bars) + " bars ago");\r\n printf("\\n" + sig + " @ : " + entry + "\\nStop Loss : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"+ "\\nTarget_1 : " + tar1 + "\\nTarget_2 : " + tar2 + "\\nTarget_3 : " + tar3);\r\n printf("\\nCurrent P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2));\r\n\r\n if (messageboard == 0) {\r\n GfxSelectFont( "Tahoma", 13, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if (sig =="BUY")\r\n GfxSelectSolidBrush( colorGreen ); // this is the box background color\r\n else\r\n GfxSelectSolidBrush( colorRed ); // this is the box background color\r\n\r\n pxHeight = Status( "pxchartheight" ) ;\r\n xx = Status( "pxchartwidth");\r\n Left = 600;\r\n width = 200;\r\n x = 5;\r\n x2 = 200;\r\n\r\n y = Status( "pxchartheight" );\r\n\r\nGfxSelectPen( colorGreen, 2); // broader color\r\nGfxRoundRect( x, y - 180, x2, y , 37, 37 ) ;\r\nGfxTextOut( ( "Premier Strategy"), 16, y-170) ;\r\n//GfxTextOut( ( "Trading System"), 16, y-170) ;\r\nGfxTextOut( ("" + WriteIf(sig =="BUY",sig + " @ ",sig + " @") + " : " + entry), 13, y-120);\r\nGfxTextOut( ("Trailing SL : " + sloss + " "), 13, y-40);\r\nGfxTextOut( ("Target:1 : " + tar1), 13, y -100);\r\nGfxTextOut( ("Target:2 : " + tar2), 13,y-80);\r\nGfxTextOut( ("Target:3 : " + tar3), 13,y-60);\r\nGfxTextOut( (Name()), 13, y -145);\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 13, y-20);;\r\nGfxTextOut( (" "),20, y -400);\r\nGfxSetBkMode(0); // transparent\r\nGfxSelectFont("Arial", 12, 400, italic = False, underline = False, True );\r\nGfxTextOut( Name(), Status("pxwidth")/2.4, Status("pxheight")/20);\r\nGfxTextOut( (""), 20, y -200);\r\n }\r\n_SECTION_END();\r\n\r\n\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n\r\n_SECTION_BEGIN("Unnamed 2");\r\n//1m\r\nec=WriteIf(EMA(C,5)&gt;EMA(C,13) OR EMA(C,5)&lt;EMA(C,13),"One","x");\r\nec2=WriteIf(EMA(C,5)&gt;EMA(C,13) AND EMA(C,5)&gt;EMA(C,20),"On","x");\r\nec3=WriteIf(EMA(C,5)&lt;EMA(C,13) AND EMA(C,5)&lt;EMA(C,20),"Oe","x");\r\n//5m\r\nTimeFrameSet(in5Minute);\r\ne5=EMA(C,5);\r\ne13=EMA(C,13);\r\ne20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne5x5=TimeFrameExpand( e5, in5Minute,expandLast );\r\ne5x13=TimeFrameExpand( e13, in5Minute,expandLast );\r\ne5x20=TimeFrameExpand( e20, in5Minute,expandLast );\r\n\r\n\r\ne5c=WriteIf(e5x5&gt;e5x13 OR e5x5&lt;e5x13,"One","x");\r\ne5c2=WriteIf(e5x5&gt;e5x13 AND e5x5&gt;e5x20,"On","x");\r\ne5c3=WriteIf(e5x5&lt;e5x13 AND e5x5&lt;e5x20,"Oe","x");\r\n\r\n//15m\r\nTimeFrameSet(in15Minute);\r\ne15=EMA(C,5);\r\ne113=EMA(C,13);\r\ne120=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne15x5=TimeFrameExpand( e15, in15Minute,expandLast );\r\ne15x13=TimeFrameExpand( e113, in15Minute,expandLast );\r\ne15x20=TimeFrameExpand( e120, in15Minute,expandLast );\r\n\r\ne15c=WriteIf(e15x5&gt;e15x13 OR e15x5&lt;e15x13,"One","x");\r\ne15c2=WriteIf(e15x5&gt;e15x13 AND e15x5&gt;e15x20,"On","x");\r\ne15c3=WriteIf(e15x5&lt;e15x13 AND e15x5&lt;e15x20,"Oe","x");\r\n//1h\r\nTimeFrameSet(inHourly);\r\ne51=EMA(C,5);\r\ne131=EMA(C,13);\r\ne201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nehx5=TimeFrameExpand( e51, inHourly,expandLast );\r\nehx13=TimeFrameExpand( e131, inHourly,expandLast );\r\nehx20=TimeFrameExpand( e201, inHourly,expandLast );\r\n\r\nehc=WriteIf(ehx5&gt;ehx13 OR ehx5&lt;ehx13,"One","x");\r\nehc2=WriteIf(ehx5&gt;ehx13 AND ehx5&gt;ehx20,"On","x");\r\nehc3=WriteIf(ehx5&lt;ehx13 AND ehx5&lt;ehx20,"Oe","x");\r\n//4h\r\nTimeFrameSet(inHourly*4);\r\neh51=EMA(C,5);\r\neh131=EMA(C,13);\r\neh201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\neh4x5=TimeFrameExpand( eh51, inHourly*4,expandLast );\r\neh4x13=TimeFrameExpand( eh131, inHourly*4,expandLast );\r\neh4x20=TimeFrameExpand( eh201, inHourly*4,expandLast );\r\n\r\ne4hc=WriteIf(eh4x5&gt;eh4x13 OR eh4x5&lt;eh4x13,"One","x");\r\ne4hc2=WriteIf(eh4x5&gt;eh4x13 AND eh4x5&gt;eh4x20,"On","x");\r\ne4hc3=WriteIf(eh4x5&lt;eh4x13 AND eh4x5&lt;eh4x20,"Oe","x");\r\n//d\r\nTimeFrameSet(inDaily);\r\ned5=EMA(C,5);\r\ned13=EMA(C,13);\r\ned20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nedx5=TimeFrameExpand( ed5, inDaily,expandLast );\r\nedx13=TimeFrameExpand( ed13, inDaily,expandLast );\r\nedx20=TimeFrameExpand( ed20, inDaily,expandLast );\r\n\r\nedc=WriteIf(edx5&gt;edx13 OR edx5&lt;edx13,"One","x");\r\nedc2=WriteIf(edx5&gt;edx13 AND edx5&gt;edx20,"On","x");\r\nedc3=WriteIf(edx5&lt;edx13 AND edx5&lt;edx20,"Oe","x");\r\n\r\nTimeFrameSet(inWeekly);\r\new5=EMA(C,5);\r\new13=EMA(C,13);\r\new20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\newx5=TimeFrameExpand( ew5, inWeekly,expandLast );\r\newx13=TimeFrameExpand( ew13, inWeekly,expandLast );\r\newx20=TimeFrameExpand( ew20, inWeekly,expandLast );\r\n\r\newc=WriteIf(ewx5&gt;ewx13 OR ewx5&lt;ewx13,"One","x");\r\newc2=WriteIf(ewx5&gt;ewx13 AND ewx5&gt;ewx20,"On","x");\r\newc3=WriteIf(ewx5&lt;ewx13 AND ewx5&lt;ewx20,"Oe","x");\r\n\r\nHor=Param("Horizontal Position",1,1,1200,1);\r\nVer=Param("Vertical Position",40,30,1000,1);\r\n///1\r\nGfxSelectFont("Callibri", 10 , 700, True );\r\nGfxSetBkMode( colorBlack );\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("EMA Sig ",Hor, Ver);\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("1 M ",Hor+72, Ver-15);\r\n\r\nif(ec=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ec2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ec3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxSelectPen( colorBlack, 1 ); // broader color\r\nGfxRectangle( Hor+70,Ver+5,Hor+100,Ver+15 );\r\n///2\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("5 M ",Hor+112, Ver-15);\r\n\r\n\r\nif(e5c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e5c2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e5c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+110,Ver+5,Hor+140,Ver+15 );\r\n///3\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("15 M ",Hor+150, Ver-15);\r\n\r\n\r\nif(e15c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e15c2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e15c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+150,Ver+5,Hor+180,Ver+15 );\r\n///4\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("1 H ",Hor+193, Ver-15);\r\n\r\n\r\nif(ehc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ehc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ehc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+190,Ver+5,Hor+220,Ver+15 );\r\n//4\r\nif(e4hc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e4hc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e4hc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+230,Ver+5,Hor+260,Ver+15 );\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("4 H ",Hor+233, Ver-15);\r\n\r\nif(edc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(edc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(edc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+270,Ver+5,Hor+300,Ver+15 );\r\nGfxTextOut("D ",Hor+280, Ver-15);\r\n\r\nif(ewc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ewc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ewc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+310,Ver+5,Hor+340,Ver+15 );\r\nGfxTextOut("Weekly ",Hor+310, Ver-15);\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("Price");\r\n\r\nP = ParamField("Price field",-1);\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n_N(Title = StrFormat(" {{DATE}}       Open - %g,       High - %g,       Low - %g,        Close - %g (%.1f%%)       {{VALUES}}", O, H, L, C, SelectedValue( ROC( C, 1 ) ) ));\r\n_SECTION_END();\r\n\r\ncrossup= C&gt;DEMA(C,100);\r\nif(StrToNum(NumToStr(crossup)))bgColor = colorLime;\r\nelse bgColor = colorOrange;\r\nSetChartBkGradientFill( colorBlack, bgColor); \r\n\r\n_SECTION_END();\r\n\r\nColor = IIf( EMA(p,55) &gt; EMA(p,200) AND C &gt; EMA(p,55) , colorBrightGreen, IIf( EMA(p,200) &gt; EMA(p,55) AND C &lt; EMA(p,55) , \r\n\r\ncolorDarkRed, colorDarkGrey )) ;\r\n  \r\nPlot( 2, "", Color, styleArea | styleOwnScale | styleNoLabel, -0.1, 35 );\r\n  \r\n_SECTION_END();\r\n</Formula>
		</File>
		<File>
			<Path>C:\\buysellcharts\\buysellcharts\\Exo.afl</Path>
			<Formula>_SECTION_BEGIN("AUTO BUY SELL SIGNALS");\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n\r\n_N(Title = StrFormat(" {{DATE}}       Open - %g,       High - %g,       Low - %g,        Close - %g (%.1f%%)       {{VALUES}}", O, H, L, C, SelectedValue( ROC( C, 1 ) ) ));\r\n//\r\n_SECTION_BEGIN("Time Left");\r\nfunction GetSecondNum()\r\n{\r\nTime = Now( 4 );\r\nSeconds = int( Time % 100 );\r\nMinutes = int( Time / 100 % 100 );\r\nHours = int( Time / 10000 % 100 );\r\nSecondNum = int( Hours * 60 * 60 + Minutes * 60 + Seconds );\r\nreturn SecondNum;\r\n}\r\nRequestTimedRefresh( 1 );\r\nTimeFrame = Interval();\r\nSecNumber = GetSecondNum();\r\nNewperiod = SecNumber % TimeFrame == 0;\r\nSecsLeft = SecNumber - int( SecNumber / TimeFrame ) * TimeFrame;\r\nSecsToGo = TimeFrame - SecsLeft;\r\n\r\nx=Param("xposn",550,0,1000,1);\r\ny=Param("yposn",40,0,1000,1);\r\n\r\nGfxSelectSolidBrush( ColorRGB( 230, 230, 230 ) );\r\nGfxSelectPen( ColorRGB( 230, 230, 230 ), 2 );\r\nif ( NewPeriod )\r\n{\r\nGfxSelectSolidBrush( colorYellow );\r\nGfxSelectPen( colorYellow, 2 );\r\n//Say( "New period" );\r\n}\r\n//GfxRoundRect( x+45, y+40, x-3, y-2, 0, 0 );\r\n//GfxSetBkMode(colorWhite );\r\nGfxSetBkMode( colorWhite );\r\nGfxSelectFont( "Times New Roman", 14, 700,True );\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut( "Time Left :"+SecsToGo+"", x, y );\r\n_SECTION_END();\r\nmessageboard = ParamToggle("Message Board","Show|Hide",0);\r\nshowsl = ParamToggle("Stop Loss Line", "Show|Hide", 0);\r\nno=25;\r\nres=HHV(H,no);\r\nsup=LLV(L,no);\r\navd=IIf(C&gt;Ref(res,-1),1,IIf(C&lt;Ref(sup,-1),-1,0));\r\navn=ValueWhen(avd!=0,avd,1);\r\ns5d=IIf(avn==1,sup,res);\r\nexitshort=Cross(C,s5d);\r\nexitlong=Cross(s5d,C);\r\n\r\nBarColors = \r\nIIf(BarsSince(exitshort) &lt; BarsSince(exitlong) \r\nAND BarsSince(exitshort)!=0, colorGreen,\r\nIIf(BarsSince(exitlong) &lt; BarsSince(exitshort)\r\nAND BarsSince(exitlong)!=0,  colorRed, colorGold));\r\n\r\nea = EMA (C,10);\r\neb = EMA (C,20);\r\n\r\nHACLOSE=(O+H+L+C)/4;\r\nHaOpen = AMA( Ref( HaClose,  -1 ),  0.5 );\r\nHaHigh = Max( H,  Max( HaClose,  HaOpen ) );\r\nHaLow = Min( L,  Min( HaClose,  HaOpen ) );\r\n\r\n\r\n\r\nif( ParamToggle("Plot Heikin-Ashi", "No,Yes", 1 ) ){\r\n\r\n\r\n\tSetBarFillColor( IIf( ea &gt; eb, colorGreen, COLORrgb(255, 22, 22) ) ); \r\n\tPlot( C, "Price", IIf( ea &gt; eb, colorBrightGreen, colorRed ), styleCandle );\r\n}\r\n   \r\nelse{\r\n\tPlotOHLC( HaOpen, HaHigh, HaLow, HaClose, "Heikin Ashi " + Name(), colorBlack, styleCandle );\r\n\t\r\n}\r\n\r\n\r\n//Plot(C, "Close", BarColors,  styleNoTitle | ParamStyle("Style") | GetPriceStyle() ) ;\r\nif (showsl == 0)\r\n{Plot(s5d,"",colorCustom10,styleLine);}\r\nexitlong = Cross(s5d, C);\r\nPlotShapes(exitlong * shapeSquare, colorRed,0,H,40);\r\nPlotShapes(exitlong * shapeSquare, colorOrange,0,H,50);\r\nPlotShapes(exitlong * shapeDownArrow, colorWhite,0,H,-45);\r\n\r\nexitshort = Cross(C, s5d);\r\nPlotShapes(exitshort * shapeSquare, colorLime,0,L,-40);\r\nPlotShapes(exitshort * shapeSquare, colorBrightGreen,0,L,-50);\r\nPlotShapes(exitshort * shapeUpArrow, colorWhite,0,L,-45);\r\n\r\n\r\n\r\n\r\n_SECTION_BEGIN("mudra");\r\n\r\n//\r\nLength=Param("Length",17, 2); // Bollinger Bands Period\r\nDeviation=Param("Deviation",2);\r\n// Deviation was 3\r\nMoneyRisk=Param("Money Risk", 1);\r\n\r\nLineStyle=ParamToggle("Display line mode", "No|Yes", 0);  // Display line mode: 0-no,1-yes  \r\ncUpTrendLine = ParamColor("UpTrendLine", colorGreen);\r\ncDnTrendLine = ParamColor("DownTrendLine", colorRed);\r\n\r\n\r\n\r\n\r\n\r\n// Offset Factor\r\nTurnedUp=Nz(StaticVarGet("TurnedUp"));\r\nTurnedDown=Nz(StaticVarGet("TurnedDown"));\r\nSoundON = ParamToggle("Sound","Off|On",1);\r\n\r\n\r\nprocedure CalcTrend_proc(bbtop,bbbot,Length,MoneyRisk,SoundON,TurnedUp,TurnedDown)\r\n{\r\nglobal UpTrendLine;\r\nglobal DownTrendLine;\r\nglobal smax;\r\nglobal smin;\r\n\r\n\tUpTrendLine=Null;\r\n\tDownTrendLine=Null;\r\n\tsmax=Null;\r\n\tsmin=Null;\r\n\ttrend=0;\r\n\r\n\r\n\tfor (i=Length+1; i&lt;BarCount; i++)\t\r\n  { \r\n\t\tsmax[i]=bbtop[i];\r\n\t\tsmin[i]=bbbot[i];\r\n\t\tif (C[i]&gt;smax[i-1]) trend=1;\r\n\t\tif (C[i]&lt;smin[i-1]) trend=-1;\r\n\t\tif(trend&gt;0 &amp;&amp; smin[i]&lt;smin[i-1]) smin[i]=smin[i-1];\r\n\t\tif(trend&lt;0 &amp;&amp; smax[i]&gt;smax[i-1]) smax[i]=smax[i-1];\r\n\t\tbsmax[i]=smax[i]+0.5*(MoneyRisk-1)*(smax[i]-smin[i]);\r\n\t\tbsmin[i]=smin[i]-0.5*(MoneyRisk-1)*(smax[i]-smin[i]);\r\n\t\tif(trend&gt;0 &amp;&amp; bsmin[i]&lt;bsmin[i-1]) bsmin[i]=bsmin[i-1];\r\n\t\tif(trend&lt;0 &amp;&amp; bsmax[i]&gt;bsmax[i-1]) bsmax[i]=bsmax[i-1];\r\n\t\tif (trend&gt;0) \r\n\t\t{ \r\n\t\t\tUpTrendLine[i]=bsmin[i];\r\n\t\t\tif (SoundON==True &amp;&amp; !TurnedUp &amp;&amp; i==BarCount-1 &amp;&amp; IsEmpty(UpTrendLine[i-1])) \r\n\t\t\t{ \r\n\t\t\t\t//Say("Hello, Attention please, Market Going, UP");\r\n\t\t\t\tTurnedUp=StaticVarSet("TurnedUp",1);\r\n\t\t\t\tTurnedDown=StaticVarSet("TurnedDown",0);\r\n\r\n\t\t\t} \r\n\t\t} \r\n\t\r\n   \tif (trend&lt;0) \r\n\t\t{ \r\n\t\t\tDownTrendLine[i]=bsmax[i];\r\n\t\t\tif (SoundON==True &amp;&amp; !TurnedDown &amp;&amp; i==BarCount-1 &amp;&amp; IsEmpty(DownTrendLine[i-1])) \r\n\t\t\t{\r\n\t\t\t\t//Say("Attention please, Market Going, DOWN");\r\n\t\t\t\tTurnedUp=StaticVarSet("TurnedUp",0);\r\n\t\t\t\tTurnedDown=StaticVarSet("TurnedDown",1);\r\n\t\t\t} \r\n\t\t} //if (trend&lt;0) \r\n\t} //for\r\n} //procedure\r\n\r\n\tbbtop=BBandTop(C,Length,Deviation);\r\n\tbbbot=BBandBot(C,Length,Deviation);\r\n\r\n\tCalcTrend_proc(bbtop,bbbot,Length,MoneyRisk,SoundON,TurnedUp,TurnedDown);\r\n\tUpTrendSigNal=UpTrendLine AND IsEmpty(Ref(UpTrendLine,-1));\r\n\tDownTrendSigNal=DownTrendLine AND IsEmpty(Ref(DownTrendLine,-1));\r\n\r\n  DisplayStyle = styleNoLabel|styleNoDraw|styleNoTitle;\r\n  if(LineStyle == 0) DisplayStyle |= styleNoLine; \r\n\r\n\r\n\tPlot(UpTrendLine,"UPTRENDLINE",cUpTrendLine,DisplayStyle);\r\n\tPlot(DownTrendLine,"DOWNTRENDLINE",cDnTrendLine,DisplayStyle) ;\r\n\r\n\tPlotShapes(IIf(UpTrendSignal,shapeNone,shapeNone),cUpTrendLine,0,bbbot,0);\r\n\tPlotShapes(IIf(DownTrendSignal,shapeNone,shapeNone),cDnTrendLine,0,bbtop,0);\r\n_SECTION_END();\r\n\r\n\r\n\r\n\r\n\r\n\r\nBuy = exitshort;\r\nSell = exitlong;\r\nShort = Sell;\r\nCover = Buy;\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\nShort = ExRem(Short, Cover);\r\nCover = ExRem(Cover, Short);\r\nAlertIf( Buy, "", "BUY @ " + C, 1 );\r\nAlertIf( Sell, "", "SELL @ " + C, 2 );\r\n\r\nfor(i=BarCount-1;i&gt;1;i--)\r\n{\r\nif(Buy[i] == 1)\r\n{\r\nentry = C[i];\r\nsig = "BUY";\r\nsl = s5d[i];\r\ntar1 = entry + (entry * .0035);\r\ntar2 = entry + (entry * .0085);\r\ntar3 = entry + (entry * .0150);\r\nbars = i;\r\ni = 0;\r\n}\r\nif(Sell[i] == 1)\r\n{\r\nsig = "SELL";\r\nentry = C[i];\r\nsl = s5d[i];\r\ntar1 = entry - (entry * .0035);\r\ntar2 = entry - (entry * .0085);\r\ntar3 = entry - (entry * .0150);\r\nbars = i;\r\ni = 0;\r\n}\r\n}\r\nOffset = 20;\r\nClr = IIf(sig == "BUY", colorGreen, colorRed);\r\nssl = IIf(bars == BarCount-1, s5d[BarCount-1], Ref(s5d, -1));\r\nsl = ssl[BarCount-1];\r\n\r\nPlot(LineArray(bars-Offset, tar1, BarCount, tar1,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar2, BarCount, tar2,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar3, BarCount, tar3,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\n\r\nfor (i=bars; i &lt;BarCount;i++)\r\n{\r\nPlotText("" + sig + " @ " + entry, BarCount+3, entry, Null, colorBlue);\r\nPlotText("Target 1 : " + tar1, BarCount+3, tar1, Null, Clr);\r\nPlotText("Target 2 : @ " + tar2, BarCount+3, tar2, Null, Clr);\r\nPlotText("Target 3 : @ " + tar3, BarCount+3, tar3, Null, Clr);\r\nPlotText("Trailing SL @ " + sl, BarCount+3, sl, Null, colorBlack);\r\n}\r\n//Plot(sl, "", colorCustom10, styleLine);\r\nprintf("Last " + sig + " Signal came " + (BarCount-bars) + " bars ago");\r\nprintf("\\n" + sig + " @ : " + entry + "\\nStop Loss : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"+ "\\nTarget_1 : " + tar1 + "\\nTarget_2 : " + tar2 + "\\nTarget_3 : " + tar3);\r\nprintf("\\nCurrent P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2));\r\n\r\nif (messageboard == 0 )\r\n{\r\nGfxSelectFont( "Tahoma", 13, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorWhite );\r\n\r\nif ( sig =="BUY")\r\n{\r\nGfxSelectSolidBrush( colorGreen ); // this is the box background color\r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( colorRed ); // this is the box background color\r\n}\r\npxHeight = Status( "pxchartheight" ) ;\r\nxx = Status( "pxchartwidth");\r\nLeft = 1100;\r\nwidth = 310;\r\nx = 2;\r\nx2 = 290;\r\n\r\ny = pxHeight;\r\n\r\nGfxSelectPen( colorLightBlue, 1); // broader color\r\nGfxRoundRect( x, y - 163, x2, y , 7, 7 ) ;\r\n\r\nGfxTextOut( (" E x o  S t r a t e g y "),13,y-160);\r\nGfxTextOut( ("Last " + sig + " Signal came " + (BarCount-bars-1) * Interval()/60 + " mins ago"), 13, y-140) ; // The text format location\r\nGfxTextOut( ("" + WriteIf(sig =="BUY",sig + " @ ",sig + " @") + " : " + entry), 13, y-120);\r\nGfxTextOut( ("Trailing SL : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"), 13, y-100);\r\nGfxTextOut( ("Target:1 : " + tar1), 13, y -80);\r\nGfxTextOut( ("Target:2 : " + tar2), 13,y-60);\r\nGfxTextOut( ("Target:3 : " + tar3), 13,y-40);\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 13, y-22);;\r\n\r\nx = 290;\r\nx2 = 570;\r\nGfxSelectSolidBrush( colorTurquoise );\r\nGfxSetTextColor( colorBlack);\r\nGfxSelectFont( "Tahoma", 14, 100 );\r\nGfxSetBkMode( 1 );\r\n\r\nGfxSelectFont( "Tahoma", 10, 400 );\r\n\r\n}\r\n//\r\n\r\nfunction PlotDT()\r\n{\r\ndisplacement = Param("Displacement Value", 12, 1, 100, 1);\r\nslmode = ParamToggle("Stop Loss", "Auto|Manual", 1);\r\nwidth = ParamToggle("Width", "HL|OC", 1);\r\nCount = Param("No. of DTL", 4, 4, 20, 1);\r\nNewDay = Day()!= Ref(Day(), -1);\r\n\r\nfor (i=BarCount-1;i &gt; 1; i--)\r\n{\r\nif(NewDay[i] == 1)\r\n{\r\nprintf("High : " + i);\r\nif(width == 1)\r\n{\r\nDL = IIf(O[i] &lt; C[i], O[i], C[i]);\r\nDH = IIf(O[i] &gt; C[i], O[i], C[i]);\r\n}\r\nelse\r\n{\r\nDL = L[i];\r\nDH = H[i];\r\n}\r\nBars = i;\r\ni = -1;\r\n}\r\n}\r\n\r\nif(slmode==1)\r\n{\r\ndistance = displacement;\r\n}\r\nelse\r\n{\r\ndistance = ((DH+DL)/2) * .01;\r\n}\r\n\r\nPlot(LineArray(BarCount - (BarCount-Bars+20), DH, BarCount+35, DH, 1), "", colorLime, styleLine|styleThick|styleDots, Null, Null, 20);\r\nPlotText("Buy Above " + DH + "; Stop Loss = " + DL, BarCount + 0, DH, colorBlack, colorLime);\r\nPlot(LineArray(BarCount - (BarCount-Bars+20), (DH+ distance), BarCount+35, (DH+ distance), 1), "", colorLime, styleLine|styleThick|styleDots, Null, Null, 20);\r\nPlotText("Target = " + (DH+ distance), BarCount + 0, (DH+ distance), colorBlack, colorLime);\r\nPlot(LineArray(BarCount - (BarCount-Bars+20), DL, BarCount+35, DL, 1), "", colorOrange, styleLine|styleThick|styleDots, Null, Null, 20);\r\nPlotText("Sell Below " + DL + "; Stop Loss = " + DH, BarCount + 0, DL, colorBlack, colorOrange);\r\nPlot(LineArray(BarCount - (BarCount-Bars+20), (DL-distance), BarCount+35, (DL-distance), 1), "", colorOrange, styleLine|styleThick|styleDots, Null, Null, 20);\r\nPlotText("Target = " + (DL-distance), BarCount + 0, (DL-distance), colorBlack, colorOrange);\r\n}\r\nfunction PlotIndicators()\r\n{\r\n\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n/* Standard Error Bands */\r\nPeriods = Param("Standard Error", 80, 3, 200, 1);\r\nSmooth = Param("Smooth",14,2,100,1);\r\n\r\n\r\nLRCurve = LinearReg( C, periods );\r\nMALRCurve = MA(LRCurve, Smooth);\r\nSEValue = StdErr( C, periods );\r\nSErrorAvg = MA(SEValue, Smooth);\r\n\r\nLowerBand = MALRCurve - SErrorAvg ;\r\nUpperBand = MALRCurve + SErrorAvg ;\r\n\r\nPlot( MALRCurve , "MidBand", ParamColor("ColorMB",colorIndigo) , styleDashed|styleNoTitle);\r\nPlot( LowerBand , "LowerBand", ParamColor("ColorLo",colorOrange) , styleLine|styleThick|styleNoTitle);\r\nPlot( UpperBand , "UpperBand", ParamColor("ColorUp",colorGreen) , styleLine|styleThick|styleNoTitle);\r\n\r\nCh = TimeFrameGetPrice("C", in1Minute/60);\r\nclr = IIf(Ch[BarCount-2] &gt; Ch[BarCount-1],colorRed,colorLime);\r\n\r\nPlot(LineArray(0,C[BarCount-1],BarCount-1,C[BarCount-1],15), "", Clr, styleLine|styleNoLabel, Null, Null, 30);\r\nPlotText("CMP:" + C[BarCount-1], BarCount+5, C[BarCount-1],colorBlack,Clr);\r\n\r\nLRPeriods = Param("Length", 40, 3, 200, 1);\r\nLRCurve = LinearReg( C, LRPeriods );\r\n\r\nPlotLR = IIf(LRCurve &lt; LowerBand, (LRCurve + LowerBand)/2, IIf(LRCurve &gt; UpperBand, (LRCurve + UpperBand)/2, LRCurve));\r\nPlotLR = (PlotLR + SwingLine)/2;\r\n//Plot( PlotLR , "Stop Loss |", ParamColor("SLColor",colorBlue), 4+8+32+2048);\r\n//Plot( SwingLine, "SwingLine", ParamColor( "SWColor", colorBlue ), ParamStyle("StyleSW",style=styleThick|styleNoLabel , mask=maskDefault) );\r\n\r\nbc1 = (Cross(C, MALRCurve) OR Cross(C, UpperBand) OR Cross(C, LowerBand)) AND (C &gt; SwingLine);\r\nbc2 = Cross(C, SwingLine) AND (C &gt; MALRCurve OR C &gt; UpperBand OR C &gt; LowerBand);\r\n\r\nsc1 = (Cross(MALRCurve, C) OR Cross(UpperBand, C) OR Cross(LowerBand, C)) AND (C &lt; SwingLine);\r\nsc2 = Cross(SwingLine, C) AND (C &lt; MALRCurve OR C &lt; UpperBand OR C &lt; LowerBand);\r\nBuy = bc1 OR bc2;\r\nSell = sc1 OR sc2;\r\nBuy = ExRem(Buy, Sell);\r\nSell = ExRem(Sell, Buy);\r\n//PlotShapes(shapeCircle*Buy + shapeCircle *Sell, IIf(Buy, colorBlue, colorRed), 0, IIf(Buy, L, H), IIf(Buy, -12, 12));\r\n\r\n}\r\n//PlotDT();\r\n\r\n\r\nicol = IIf ( MA (Close,25) &gt; Ref (MA (Close,25),-1),colorBrightGreen,colorRed);\r\n\r\n\r\nPlot( MA( High, 25 ),"", icol, styleThick);\r\n//Plot( EMA( High, 5 ),"", icol, styleThick);\r\nColor_buy = IIf(Close &gt; EMA(Close,89) AND Close &gt; EMA(High,25),colorBlue,IIf(Close &lt; EMA(Close,89) AND Close &lt; EMA(Low,25),colorRed,colorYellow));\r\n\r\n//PlotOHLC( Open, High, Low, Close, "", Color_buy, styleCandle );\r\n\r\ncrossup= C&gt;DEMA(C,100);\r\nif(StrToNum(NumToStr(crossup)))bgColor = colorDarkGreen;\r\nelse bgColor = colorDarkRed;\r\nSetChartBkGradientFill( colorBlack, bgColor); \r\n\r\n\r\n//SetChartBkGradientFill( ParamColor("BgTop", colorBlack),\r\n//ParamColor("BgBottom", ColorRGB( 50,47,45 )),ParamColor("titleblock",colorBlack));\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Paste the code below to your price chart somewhere and green ribbon means both\r\n// both MACD and ADX trending up so if the red ribbon shows up the MACD and the ADX \r\n// are both trending down.\r\n\r\n\r\nuptrend=PDI()&gt;MDI()AND Signal()&lt;MACD();\r\ndowntrend=MDI()&gt;PDI()AND Signal()&gt;MACD();\r\n\r\n\r\nPlot( 2, /* defines the height of the ribbon in percent of pane width */"",\r\nIIf( uptrend, colorGreen, IIf( downtrend, colorRed, 0 )), /* choose color */\r\nstyleOwnScale|styleArea|styleNoLabel, -0.5, 100 );\r\n\r\n_SECTION_END();\r\n\r\n\r\n//============== TITLE ==============\r\n_SECTION_BEGIN("Magnified Market Price");\r\n//by Vidyasagar, vkunisetty@yahoo.com//\r\nFS=Param("Font Size",18,30,100,1);\r\nGfxSelectFont("Times New Roman", FS, 900, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor( ParamColor("Color",colorYellow) );\r\n//Hor=Param("Horizontal Position",800,800,800,800);\r\n\r\n\r\nGfxTextOut(""+C,430 ,40 );\r\nYC=TimeFrameGetPrice("C",inDaily,-1);\r\nDD=Prec(C-YC,2);\r\nxx=Prec((DD/YC)*100,2);\r\nGfxSelectFont("Times New Roman", 12, 700, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor(ParamColor("Color",colorYellow) );\r\nGfxTextOut(""+DD+" ("+xx+"%)", 420, 70 );\r\n\r\nBuy=xx&gt;=2;\r\n_SECTION_END();\r\n\r\n\r\nDayH = SelectedValue(TimeFrameGetPrice("H", inDaily));// yesterdays high \r\nDayL = SelectedValue(TimeFrameGetPrice("L", inDaily));//low \r\nDayH1 = SelectedValue(TimeFrameGetPrice("H", inDaily, -1));// yesterdays high \r\nDayL1 = SelectedValue(TimeFrameGetPrice("L", inDaily, -1));//low \r\nDayH2 = SelectedValue(TimeFrameGetPrice("H", inDaily, -2));// yesterdays high \r\nDayL2 = SelectedValue(TimeFrameGetPrice("L", inDaily, -2));//low \r\n\r\nRange = ((DayH +DayH1  +DayH2)/3 - (DayL+DayL1+DayL2)/3);\r\nsr3= (Range *0.702)+DayL;\r\nsr4= DayH-(Range *0.655);\r\n\r\nstyle = styleLine | styleNoRescale|styleLine; \r\nPlot(sr3, "SR3",colorOrange  , styleDashed|styleNoRescale|styleThick);\r\nPlot(sr4, "SR4",colorSkyblue ,styleDashed|styleNoRescale|styleThick);\r\n\r\nA = DEMA (H,65);\r\nB = EMA (H,39);\r\nG = DEMA (L,65);\r\nI = EMA(L,39);\r\nD = Min (G,I);\r\nE = Max (A,B);\r\n/* Buy or Sell Condition */\r\nBuy =Cover= Cross(Close,E);\r\nSell = Short=Cross(D,Close);\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\nSellPrice=ValueWhen(Sell,C,1);\r\nBuyPrice=ValueWhen(Buy,C,1);\r\n\r\nFilter = Buy OR Sell;\r\n\r\n\r\n_SECTION_END();\r\n_SECTION_BEGIN( "BASERECTANGEL" );\r\n \r\n \r\nHor=Param("Horizontal Position",-15,1,1200,1);\r\nVer=Param("Vertical Position",70,30,1000,1);\r\n\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlack );\r\n GfxSelectSolidBrush( colorBlue ); \r\n GfxSelectPen( colorYellow, 1 ); \r\n// broader color \r\n GfxRectangle(40,ver-25,350,ver+30);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Trend Timeframe");\r\n//1m\r\nec=WriteIf(EMA(C,5)&gt;EMA(C,13) OR EMA(C,5)&lt;EMA(C,13),"One","x");\r\nec2=WriteIf(EMA(C,5)&gt;EMA(C,13) AND EMA(C,5)&gt;EMA(C,20),"On","x");\r\nec3=WriteIf(EMA(C,5)&lt;EMA(C,13) AND EMA(C,5)&lt;EMA(C,20),"Oe","x");\r\n//5m\r\nTimeFrameSet(in5Minute);\r\ne5=EMA(C,5);\r\ne13=EMA(C,13);\r\ne20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne5x5=TimeFrameExpand( e5, in5Minute,expandLast );\r\ne5x13=TimeFrameExpand( e13, in5Minute,expandLast );\r\ne5x20=TimeFrameExpand( e20, in5Minute,expandLast );\r\n\r\n\r\ne5c=WriteIf(e5x5&gt;e5x13 OR e5x5&lt;e5x13,"One","x");\r\ne5c2=WriteIf(e5x5&gt;e5x13 AND e5x5&gt;e5x20,"On","x");\r\ne5c3=WriteIf(e5x5&lt;e5x13 AND e5x5&lt;e5x20,"Oe","x");\r\n\r\n//15m\r\nTimeFrameSet(in15Minute);\r\ne15=EMA(C,5);\r\ne113=EMA(C,13);\r\ne120=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne15x5=TimeFrameExpand( e15, in15Minute,expandLast );\r\ne15x13=TimeFrameExpand( e113, in15Minute,expandLast );\r\ne15x20=TimeFrameExpand( e120, in15Minute,expandLast );\r\n\r\ne15c=WriteIf(e15x5&gt;e15x13 OR e15x5&lt;e15x13,"One","x");\r\ne15c2=WriteIf(e15x5&gt;e15x13 AND e15x5&gt;e15x20,"On","x");\r\ne15c3=WriteIf(e15x5&lt;e15x13 AND e15x5&lt;e15x20,"Oe","x");\r\n//1h\r\nTimeFrameSet(inHourly);\r\ne51=EMA(C,5);\r\ne131=EMA(C,13);\r\ne201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nehx5=TimeFrameExpand( e51, inHourly,expandLast );\r\nehx13=TimeFrameExpand( e131, inHourly,expandLast );\r\nehx20=TimeFrameExpand( e201, inHourly,expandLast );\r\n\r\nehc=WriteIf(ehx5&gt;ehx13 OR ehx5&lt;ehx13,"One","x");\r\nehc2=WriteIf(ehx5&gt;ehx13 AND ehx5&gt;ehx20,"On","x");\r\nehc3=WriteIf(ehx5&lt;ehx13 AND ehx5&lt;ehx20,"Oe","x");\r\n//4h\r\nTimeFrameSet(inHourly*4);\r\neh51=EMA(C,5);\r\neh131=EMA(C,13);\r\neh201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\neh4x5=TimeFrameExpand( eh51, inHourly*4,expandLast );\r\neh4x13=TimeFrameExpand( eh131, inHourly*4,expandLast );\r\neh4x20=TimeFrameExpand( eh201, inHourly*4,expandLast );\r\n\r\ne4hc=WriteIf(eh4x5&gt;eh4x13 OR eh4x5&lt;eh4x13,"One","x");\r\ne4hc2=WriteIf(eh4x5&gt;eh4x13 AND eh4x5&gt;eh4x20,"On","x");\r\ne4hc3=WriteIf(eh4x5&lt;eh4x13 AND eh4x5&lt;eh4x20,"Oe","x");\r\n//d\r\nTimeFrameSet(inDaily);\r\ned5=EMA(C,5);\r\ned13=EMA(C,13);\r\ned20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nedx5=TimeFrameExpand( ed5, inDaily,expandLast );\r\nedx13=TimeFrameExpand( ed13, inDaily,expandLast );\r\nedx20=TimeFrameExpand( ed20, inDaily,expandLast );\r\n\r\nedc=WriteIf(edx5&gt;edx13 OR edx5&lt;edx13,"One","x");\r\nedc2=WriteIf(edx5&gt;edx13 AND edx5&gt;edx20,"On","x");\r\nedc3=WriteIf(edx5&lt;edx13 AND edx5&lt;edx20,"Oe","x");\r\n\r\nTimeFrameSet(inWeekly);\r\new5=EMA(C,5);\r\new13=EMA(C,13);\r\new20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\newx5=TimeFrameExpand( ew5, inWeekly,expandLast );\r\newx13=TimeFrameExpand( ew13, inWeekly,expandLast );\r\newx20=TimeFrameExpand( ew20, inWeekly,expandLast );\r\n\r\newc=WriteIf(ewx5&gt;ewx13 OR ewx5&lt;ewx13,"One","x");\r\newc2=WriteIf(ewx5&gt;ewx13 AND ewx5&gt;ewx20,"On","x");\r\newc3=WriteIf(ewx5&lt;ewx13 AND ewx5&lt;ewx20,"Oe","x");\r\n\r\n///1\r\nGfxSelectFont("Callibri", 10 , 700, True );\r\nGfxSetBkMode( colorBlack );\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("Trend ",20, Ver);\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("1 M ",Hor+72, Ver-15);\r\n\r\nif(ec=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ec2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ec3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxSelectPen( colorBlack, 1 ); // broader color\r\nGfxRectangle( Hor+75,Ver+5,Hor+110,Ver+18 );\r\n///2\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("SMART TREND INDICATORS ",Hor+122, Ver-15);\r\n\r\n\r\nif(e5c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e5c2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e5c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+115,Ver+5,Hor+150,Ver+18 );\r\n///3\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("15 M ",Hor+150, Ver-15);\r\n\r\n\r\nif(e15c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e15c2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e15c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+155,Ver+5,Hor+190,Ver+18 );\r\n///4\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("1 H ",Hor+193, Ver-15);\r\n\r\n\r\nif(ehc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ehc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ehc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+195,Ver+5,Hor+230,Ver+18 );\r\n//4\r\nif(e4hc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e4hc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(e4hc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+235,Ver+5,Hor+270,Ver+18 );\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("4 H ",Hor+233, Ver-15);\r\n\r\nif(edc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(edc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(edc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+275,Ver+5,Hor+310,Ver+18 );\r\n//GfxTextOut("D ",Hor+280, Ver-15);\r\n\r\nif(ewc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ewc2=="On")\r\nGfxSelectSolidBrush(colorBrightGreen);\r\nif(ewc3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+315,Ver+5,Hor+350,Ver+18 );\r\n//GfxTextOut("Weekly ",Hor+310, Ver-15);\r\n_SECTION_END();\r\n\r\n</Formula>
		</File>
		<File>
			<Path>C:\\buysellcharts\\buysellcharts\\mps.afl</Path>
			<Formula>_SECTION_BEGIN("Chart Settings");\r\n\t//SetChartOptions(0,chartShowArrows|chartShowDates);\r\n\tSetChartBkColor(ParamColor("Outer Panel",colorBlack));\r\n\tSetChartBkGradientFill(ParamColor("Upper Chart",colorDarkTeal),ParamColor("Lower Chart",colorBlack));\r\n\t//GraphXSpace=Param("GraphXSpace",10,0,100,1);\r\n\tdec = (Param("Decimals",2,0,7,1)/10)+1;\r\n\r\nTitle = EncodeColor(55)+  Title = Name() + "     " + EncodeColor(32) + Date() +\r\n"      " + EncodeColor(5) + "{{INTERVAL}}  " +\r\n\tEncodeColor(55)+ "     Open = "+ EncodeColor(52)+ WriteVal(O,dec) + \r\n\tEncodeColor(55)+ "     High = "+ EncodeColor(5) + WriteVal(H,dec) +\r\n\tEncodeColor(55)+ "      Low = "+ EncodeColor(32)+ WriteVal(L,dec) + \r\n\tEncodeColor(55)+ "    Close = "+ EncodeColor(52)+ WriteVal(C,dec)+\r\n\tEncodeColor(55)+ "    Volume = "+ EncodeColor(52)+ WriteVal(V,1);\r\n\t\r\n\tLB= Param("Look Back Periods",10,1,30,1);\r\n\tR=ValueWhen(Cross(MA(C,LB),C),HHV(H,LB),1);\r\n\tS=ValueWhen(Cross(C,MA(C,LB)),LLV(L,LB),1);\r\n\tColor=IIf(O&gt;C,colorRed,colorLavender);\r\n\tPlot (C,"Close",color,64,32);\r\n\tGraphXSpace=4;\r\n\t\r\n\tuptrend=PDI()&gt;MDI()AND Signal()&lt;MACD();\r\ndowntrend=MDI()&gt;PDI()AND Signal()&gt;MACD();\r\n\r\n\r\nPlot( 2, /* defines the height of the ribbon in percent of pane width */"ribbon",\r\nIIf( uptrend, colorGreen, IIf( downtrend, colorRed, 0 )), /* choose color */\r\nstyleOwnScale|styleArea|styleNoLabel, -0.5, 100 );\r\n\t\r\n\ticol = IIf ( MA (Close,25) &gt; Ref (MA (Close,25),-1),colorGreen,colorRed);\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\n_SECTION_BEGIN( "BASERECTANGEL" );\r\n \r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n GfxSelectSolidBrush( colorDarkGrey ); \r\n GfxSelectPen( colorDarkGrey, 1 ); \r\n// broader color \r\n GfxRectangle(0,15,203,400);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN( "MSGRECTANGEL" );\r\n \r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n GfxSelectSolidBrush( colorDarkGrey ); \r\n GfxSelectPen( colorDarkGrey, 1 ); \r\n// broader color \r\npxHeight = Status( "pxchartheight" ) ;\r\ny = pxHeight;\r\n GfxRectangle(0,y-170,325,y-12);\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("Price");\r\n\r\nFS=Param("Font Size",20,11,100,1);\r\nGfxSelectFont("Arial", 18, 700, True ); \r\nGfxSetBkMode( colorWhite );  \r\nGfxSetTextColor( ParamColor("Color",colorWhite) ); \r\nHor=Param("Horizontal Position",460,1,1200,1);\r\nVer=Param("Vertical Position",25,1,830,1); \r\nGfxTextOut(""+C, Hor , Ver );\r\nYC=TimeFrameGetPrice("C",inDaily,-1);\r\nDD=Prec(C-YC,2);\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\n_SECTION_BEGIN("Logo");\r\n\r\n\r\n\r\nGfxSelectFont("arial", 8, 700 ); GfxSetBkMode( colorLightBlue );\r\nGfxSetTextColor( ParamColor("Color",colorLightBlue) );\r\nHor=Param("Horizontal Position",0,10,1200,1);\r\nVer=Param("Vertical Position",380,100,50,50);\r\n\r\nGfxTextOut("   P  R  I  M  I  E  R    S  T  R  A  T  E  G  Y",Hor , Ver );\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("CName");\r\n\r\nGfxSelectFont("arial", 11, 700 ); \r\nGfxSetTextColor( ParamColor("Color",colorYellow) );\r\nHor=Param("Horizontal Position",5,10,1200,1);\r\nVer=Param("Vertical Position",430,100,50,50);\r\npxHeight = Status( "pxchartheight" ) ;\r\ny = pxHeight;\r\nGfxTextOut("     Premier Strategy v1.2",Hor , y-165 );\r\n_SECTION_END();\r\n\r\n\r\n\r\n\r\n_SECTION_BEGIN("PivotR");\r\n\r\npxHeight = Status( "pxchartheight" ) ;\r\ny = pxHeight;\r\n\r\nTimeFrameSet( in15Minute*2 ); \r\nDH=Ref(H,-1); \r\nDL=Ref(L,-1);\r\nDC=Ref(C,-1);\r\n \r\n \r\npd = (O+ DH+ DL + DC )/4;\r\nsd1 = (2*pd)-DH;\r\nsd2 = pd -(DH - DL);\r\nsd3 = Sd1 - (DH-DL); \r\nrd1 = (2*pd)-DL;\r\nrd2 = pd +(DH -DL);\r\nrd3 = rd1 +(DH-DL);\r\n\r\nGfxSelectFont("arial", 10, 700 ); \r\nGfxSetTextColor( ParamColor("Color",colorRed) );\r\nGfxTextOut("R3 : "+rd3,Hor+246 , y-163 );\r\nGfxTextOut("R2 : "+rd2,Hor+246 , y-143 );\r\nGfxTextOut("R1 : "+rd1,Hor+246 , y-123 );\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Pivot");\r\nGfxSetTextColor( ParamColor("Color",colorYellow) );\r\nGfxTextOut("PP : "+pd,Hor+246 , y-100 );\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("PivotS");\r\n\r\nGfxSetTextColor( ParamColor("Color",colorGreen) );\r\nGfxTextOut("S1 : "+sd1,Hor+246 , y-80 );\r\nGfxTextOut("S2 : "+sd2,Hor+246 , y-60 );\r\nGfxTextOut("S3 : "+sd3,Hor+246 , y-40 );\r\n\r\n\r\nTimeFrameRestore();\r\n\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("Flower");\r\nShow_color = ParamToggle("Display CandleColor", "No|Yes", 1);\r\nr1 = Param( "ColorFast avg", 5, 2, 200, 1 );\r\nr2 = Param( "ColorSlow avg", 10, 2, 200, 1 );\r\nr3 = Param( "ColorSignal avg", 5, 2, 200, 1 );\r\n\r\nPrd1=Param("ATR Period",4,1,20,1);\r\nPrd2=Param("Look Back",7,1,20,1);\r\ngreen = HHV(LLV(L,Prd1)+ATR(Prd1),Prd2);\r\nred = LLV(HHV(H,Prd1)-ATR(Prd1),Prd2);\r\nflowerClose = EMA((Open+High+Low+Close)/4,3) ;\r\nflowerOpen = EMA((Ref(Open,-1) + Ref(flowerClose,-1))/2,3);\r\nTemp = Max(High, flowerOpen);\r\nflowerHigh = EMA(Max(Temp, flowerClose),3);\r\nTemp = Min(Low,flowerOpen);\r\nflowerLow = EMA(Min(Temp, flowerClose),3);\r\n\r\n\r\n\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\nmycolor=IIf(m1&lt;0 AND m1&gt;s1, colorYellow,IIf(m1&gt;0 AND \r\n\r\nm1&gt;s1,colorWhite,IIf(m1&gt;0 AND m1&lt;s1,colorDarkYellow,colorRed)));\r\nif(Show_color)\r\n{\r\nColorHighliter = myColor;\r\nSetBarFillColor( ColorHighliter );\r\n}\r\n\r\nbarColor=IIf(C&gt;Green ,colorWhite,IIf(C &lt; RED,colorRed,colorWhite));\r\n\r\n\r\nPlotOHLC( IIf(flowerOpen&lt;flowerClose, flowerOpen, \r\n\r\nflowerClose),flowerHigh,flowerLow,IIf(flowerOpen&lt;flowerClose, flowerClose, \r\n\r\nflowerOpen), "Close", barColor, styleNoTitle | styleNoDraw);\r\n\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n \r\n_SECTION_BEGIN("Breakout Setting");\r\n Buyperiods=Param("Breakout periods best is usually 18",5,1,100,1,1);\r\n Sellperiods=Param("Exit Breakout",5,1,100,1,1);\r\n\r\n HaClose =EMA((O+H+L+C)/4,3); // Woodie \r\n //HaClose =(O+H+L+C)/4; \r\n HaOpen = AMA( Ref( HaClose, -1 ), 0.5 ); \r\n HaHigh = Max( H, Max( HaClose, HaOpen ) ); \r\n HaLow = Min( L, Min( HaClose, HaOpen ) ); \r\n Buy= C&gt;Ref(HHV(High,Buyperiods),-1) ;\r\n Sell= C&lt;Ref(LLV(Low,Sellperiods),-1);\r\n\r\n /* exrem is one method to remove surplus strade signals. It removes excessive signals of arrow */\r\n Buy = ExRem(Buy, Sell);\r\n Sell = ExRem(Sell, Buy);\r\n\r\n //PlotShapes( IIf( Buy, shapeSmallUpTriangle, shapeNone ), colorWhite, layer = 0,yposition = HaLow, offset = -30);\r\n //PlotShapes( IIf( Buy, shapeSmallCircle, shapeNone ), colorWhite, layer = 0,yposition = HaLow, offset = -8);\r\n\r\n //PlotShapes( IIf( Sell, shapeSmallDownTriangle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = -30);\r\n //PlotShapes( IIf( Sell, shapeSmallCircle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = -8);\r\n\r\n _SECTION_END();\r\n\r\n\r\n//#include &lt;T3.AFL&gt;;\r\n\r\n_SECTION_BEGIN("PFE");\r\n\r\npds=10; \r\nx=sqrt((ROC(C,9)*ROC(C,9))+100);\r\ny=Sum(sqrt((ROC(C,1)* ROC(C,1))+1),pds);\r\nz=(x/y);\r\npfe=EMA(IIf(C&gt;Ref(C,-9),z,-z)*100,5);\r\n\r\nrsidn=pfe &lt;-10 AND pfe&lt;Ref(pfe,-1);\r\nrsiup=pfe &gt;10 AND pfe&gt;Ref(pfe,-1);\r\n\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,90,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(90,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n\r\n GfxCircle( 100,90,50 );\r\n _SECTION_END();\r\n\r\n\r\n\r\n                                                                                            \r\n\r\n//GfxRoundRect( 15,305,135,215, 5, 5 );\r\n GfxCircle( 100,100,70 );\r\n _SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("STC");\r\n\r\n_SECTION_BEGIN("Schaff Trend Cycle");\r\n/*\r\nPorted directly from original STC Tradestation code\r\nresults differ from other Amibroker versions that are not based directly on original EasyLanguage code\r\nhttp://mediaserver.fxstreet.com/Reports/99afdb5f-d41d-4a2c-802c-f5d787df886c/ebfbf387-4b27-4a0f-848c-039f4ab77c00.pdf\r\n*/\r\nMA1=23;\r\nMA2=50;\r\nTCLen=10;\r\nMA1=Param("ShortMACDLen",23,5,36);\r\nMA2=Param("LOngMACDLen",50,10,100);\r\nTCLen=Param("TCLen(StochPeriod)",10,5,20);\r\nFactor=.5;\r\n//Calculate a MACD Line\r\nXMac = MACD(MA1,MA2) ; // MACD in Amibroker always uses Close for MACD calculation\r\n\r\n//1st Stochastic: Calculate Stochastic of a MACD\r\nValue1 = LLV(XMac, TCLen);\r\nValue2 = HHV(XMac, TCLen) - Value1;\r\n\r\n//Frac1=1; // prime Frac1 to a default of 1\r\n//Frac1 = IIf(Value2 &gt; 0, ((XMac - Value1) / Value2) * 100, Ref(FRAC1,-1));\r\n// have to "prime" first value so that reference to "i-1" does not result in subscript out of range\r\n// since MACD for both periods is not defined until MA2 period, 0 seems to be mathematically correct priming value\r\nfrac1=0;\r\nfor (i = 1; i &lt; BarCount; i++) {\r\nif (Value2[i] &gt; 0) {\r\n\tfrac1[i] = ((XMac[i] - Value1[i])/Value2[i])*100;\r\n\t}\r\nelse {\r\n\tfrac1[i]= frac1[i-1];\r\n\t}\r\n}\r\n\r\n//Smoothed calculation for %FastD of MACD\r\n\r\nPF[0]=frac1[0]; \r\nPF[1]=frac1[1];\r\nfor (i = 2; i &lt; BarCount; i++) {\r\n\tPF[i]=PF[i-1]+(Factor*(frac1[i]-PF[i-1]));\r\n}\r\n\r\n\r\n//2nd Stochastic: Calculate Stochastic of Smoothed Percent FastD, above.\r\nValue3 = LLV(PF, TCLen);\r\nValue4 = HHV(PF, TCLen) - Value3;\r\n\r\n//%FastK of PF\r\n/*\r\nFrac2=1;\r\nFrac2 = IIf(Value4 &gt; 0, ((PF - Value3) / Value4) * 100, Ref(FRAC2,-1));\r\n*/\r\n\r\nfrac2[0]=0;\r\nfor (i = 1; i &lt; BarCount; i++) {\r\n\tif (Value4[i] &gt; 0 ) {\r\n\t\tfrac2[i]=((PF[i] - Value3[i])/Value4[i])*100;\r\n\t}\r\n\telse {\r\n\t\tfrac2[i]=frac2[i-1];\r\n\t}\r\n}\r\n\r\n//Smoothed calculation for %FastD of PF\r\nPFF[0]=frac2[0];\r\nPFF[1]=frac2[1];\r\nfor (i = 2; i &lt; BarCount; i++) {\r\n\tPFF[i]=PFF[i-1]+(Factor*(frac2[i]-PFF[i-1]));\r\n}\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n rsidn=pff &lt;2;\r\n rsiup=pff &gt;98;\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,120,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(120,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n\r\n GfxCircle( 100,100,60 );\r\n _SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("rsi");\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n rsidn=RSI(7) &lt;30;\r\n rsiup=RSI(7) &gt;70;\r\n\r\n\r\n rsiresult1 = WriteIf( rsiup,"cu", "");\r\n rsiresult2 = WriteIf( rsidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 120 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( rsiresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,150,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(150,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n\r\n GfxCircle( 100,100,50 );\r\n _SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("Rays");\r\n\r\n //FT=ParamColor("FT", colorRed );\r\n\r\n Pp1=3;\r\n Pp2=2;\r\n\r\n CS33=HHV(LLV(flowerHigh,Pp1)-ATR(Pp2),4); \r\n CR33=HHV(LLV(flowerHigh,Pp1)-ATR(Pp2),5);\r\n\r\n AtrupTrendCond1 = flowerClose&gt; CS33 ;\r\n AtrdnTrendCond1 =CS33&gt;flowerClose ;\r\n\r\n\r\n ATRup = WriteIf(AtrupTrendCond1,"atrup", "");\r\n ATRdown= WriteIf( AtrdnTrendCond1,"atrdn", "");\r\n\r\n if ( ATRup =="atrup")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,180,0) ); \r\n\r\n }\r\n else\r\n\r\n if (ATRdown =="atrdn")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(180,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( ATRdown =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\n GfxCircle( 100,100,40 );\r\n\r\n _SECTION_END();\r\n\r\n\r\n _SECTION_BEGIN("Exit_Beast-3");\r\n\r\n //GT=ParamColor("GT", colorRed );\r\n\r\n EntrylookbackPeriod=10;\r\n EntryATRperiod=1.9;\r\n EntrySig = C &gt; ( LLV( flowerLow, EntrylookbackPeriod ) + EntryATRperiod * ATR( 10 ) );\r\n ExitSig = C &lt; ( HHV( flowerHigh, EntrylookbackPeriod ) -EntryATRperiod * ATR( 10 ) );\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n EntryB = WriteIf( EntrySig,"eu", "");\r\n ExitB = WriteIf( ExitSig,"ed", "");\r\n\r\n if ( EntryB =="eu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,210,0) ); //\r\n\r\n }\r\n else\r\n\r\n if ( ExitB =="ed")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(210,0,0)); //\r\n\r\n }\r\n\r\n else\r\n\r\n if ( ExitB =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\n GfxCircle( 100,100,30 );// changing the value of x,y,rad x-70, y-90, rad-24\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n _SECTION_BEGIN("CCI9-2");\r\n\r\n //HT=ParamColor("HT", colorRed );\r\n\r\n ccidn=CCI(8) &lt; 0;\r\n cciup=CCI(9) &gt; 0;\r\n\r\n\r\n ccresult1 = WriteIf( cciup,"cu", "");\r\n ccresult2 = WriteIf( ccidn,"cd", "");\r\n\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( ccresult1 =="cu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,240,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( ccresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(240,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( ccresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\n GfxCircle( 100,100,20);\r\n\r\n\r\n\r\n\r\n _SECTION_END();\r\n\r\n\r\n\r\n\r\n _SECTION_BEGIN("%BB7-1");\r\n\r\n //IT=ParamColor("IT", colorRed );\r\n p=7;\r\n x=((C+2*StDev(C,p)-MA(C,p))/(4*StDev(C,p)))*100;\r\n bbdown= x &lt; 40;\r\n bbup= x &gt; 40;\r\n\r\n bbresult1 = WriteIf( bbup,"bu", "");\r\n bbresult2 = WriteIf( bbdown,"bd", "");\r\n bbresult3 = WriteIf( C,"bearishrevers", "");\r\n\r\n\r\n\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Tahoma", 12, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if ( bbresult1 =="bu")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(62,255,62) ); \r\n\r\n }\r\n else\r\n\r\n if ( bbresult2 =="bd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(255,62,62) ); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( bbresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush(  ColorRGB(0,0,94)  ); \r\n\r\n }\r\n\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); // broader color \r\n GfxCircle( 100,100,10 );\r\n\r\n\r\n _SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("MACDHIGHBULLISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&gt;0 AND m1&gt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,0,94) ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\n GfxRectangle(80,220,120,280);\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MACDLOWHBULLISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&lt;0 AND m1&gt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,0,94) ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\n GfxRectangle(120,315,180,280);\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MACDLOWHBEARISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&gt;0 AND m1&lt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(225,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,0,94) ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\n GfxRectangle(20,315,80,280);\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("MACDHIGHHBEARISH");\r\nr1 = Param( "Fast avg", 12, 2, 200, 1 );\r\nr2 = Param( "Slow avg", 26, 2, 200, 1 );\r\nr3 = Param( "Signal avg", 9, 2, 200, 1 );\r\nr4 = Param( "Wk slow", 17, 2, 200, 1 );\r\nr5 = Param( "Wk fast", 8, 2, 200, 1 );\r\nm1=MACD(r1,r2);\r\ns1=Signal(r1,r2,r3);\r\n\r\n\r\n\r\n\r\n\r\nrsidn=m1&lt;0 AND m1&lt;s1;\r\nrsiresult2 = WriteIf( rsidn,"cd", "");\r\nif ( rsiresult2 =="cd")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(225,0,0)); \r\n\r\n }\r\n\r\n else\r\n\r\n if ( rsiresult2 =="")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,0,94) ); \r\n\r\n }\r\n RequestTimedRefresh( 0 );\r\n GfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorBlue );\r\n\r\n GfxSelectPen( colorBlue, 1 ); \r\n// broader color \r\n\r\n GfxRectangle(80,375,120,315);\r\n_SECTION_END();\r\n \r\n \r\n_SECTION_BEGIN("bearishline");\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorRed );\r\n\r\n GfxSelectPen( colorRed, 1 ); \r\n\r\n\r\nGfxMoveTo( 25,320 );\r\nGfxLineTo( 75, 370 );  \r\n_SECTION_END();\r\n_SECTION_BEGIN("bullishline");\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorGreen );\r\n\r\n GfxSelectPen( colorGreen, 1 ); \r\n\r\n\r\n \r\n\r\nGfxMoveTo( 125,225 );\r\nGfxLineTo( 175, 275 );  \r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("trendline");\r\n\r\nfarback=Param("How Far back to go",100,50,5000,10);\r\nnBars = Param("Number of bars", 12, 5, 40);\r\naHPivs = H - H;aLPivs = L - L;\r\naHPivHighs = H - H;aLPivLows = L - L;aHPivIdxs = H - H;aLPivIdxs = L - L;\r\nnHPivs = 0;nLPivs = 0;lastHPIdx = 0;lastLPIdx = 0;lastHPH = 0;lastLPL = 0;\r\ncurPivBarIdx = 0;\r\n//aHHVBars = HHVBars(H, nBars);aLLVBars = LLVBars(L, nBars);\r\n//aHHV = HHV(H, nBars);aLLV = LLV(L, nBars);\r\n//aVisBars = Status("barvisible");nLastVisBar = LastValue(Highest(IIf(aVisBars, BarIndex(), 0)));\r\n//_TRACE("Last visible bar: " + nLastVisBar);\r\n//curBar = (BarCount-1);curTrend = "";if (aLLVBars[curBar] &lt; aHHVBars[curBar]) {\r\n//curTrend = "D";}else {curTrend = "U";}\r\n//for (i=0; i&lt;farback; i++) {curBar = (BarCount - 1) - i;\r\na1=ahpivs==1;a2=alpivs==1;\r\nx = Cum(1);s1=L;s11=H;pS = a2 == 1;\r\nendt= SelectedValue(ValueWhen( pS, x, 1 ));\r\nstartt=SelectedValue(ValueWhen( pS, x, 2 ));\r\ndtS =endt-startt;\r\nendS = SelectedValue(ValueWhen( pS, s1, 1 ) );\r\nstartS = SelectedValue( ValueWhen( pS, s1, 2 ));aS = (endS-startS)/dtS;\r\nbS = endS;trendlineS = aS * ( x -endt ) + bS;\r\ng3= IIf(x&gt;startt-10,trendlineS,-1e10);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("trendlineA");\r\ndn=g3&gt;C;\r\nup=g3&lt;C;\r\n bbresult1 = WriteIf( dn,"dn", "");\r\n bbresult2 = WriteIf( up,"up", "");\r\n RequestTimedRefresh( 0 );\r\n if ( bbresult1 =="dn")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(255,0,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( bbresult2 =="up")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0) ); \r\n\r\n }\r\n\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\nGfxSelectPen( colorWhite, 1 ); \r\n\r\n GfxCircle( 30,229,8 );\r\n _SECTION_END();\r\n \r\n_SECTION_BEGIN("trendlineA");\r\ndn=g3&gt;C;\r\nup=g3&lt;C;\r\n bbresult1 = WriteIf( dn,"dn", "");\r\n bbresult2 = WriteIf( up,"up", "");\r\n RequestTimedRefresh( 0 );\r\n if ( bbresult1 =="dn")\r\n {\r\n GfxSelectSolidBrush( ColorRGB(255,0,0) ); \r\n\r\n }\r\n else\r\n\r\n if ( bbresult2 =="up")\r\n\r\n {\r\n GfxSelectSolidBrush( ColorRGB(0,147,0) ); \r\n\r\n }\r\n\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\nGfxSelectPen( colorWhite, 1 ); \r\n\r\n GfxCircle( 168,367,8 );\r\n _SECTION_END();\r\n\r\n_SECTION_BEGIN("TRENDLINEline");\r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n GfxSelectPen( colorWhite, 1 ); \r\n\r\n\r\n \r\n\r\nGfxMoveTo( 35,234 );\r\nGfxLineTo( 163, 362 );  \r\n_SECTION_END();\r\n_SECTION_END();\r\n\r\n\r\n\r\n_SECTION_BEGIN("traing sl");\r\n\r\nfunction vstop_func(trBull,trBear)\r\n{\r\n\ttrailArray[ 0 ] = C[ 0 ]; // initialize\r\n\tfor( i = 1; i &lt; BarCount; i++ )\r\n\t{\r\n\t\tprev = trailArray[ i - 1 ];\r\n \r\n\t\tif (C[ i ] &gt; prev AND C[ i - 1 ] &gt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = Max(prev,C[ i ] - trBull[ i ]);\r\n\t\t}\r\n\t\telse if (C[ i ] &lt; prev AND C[ i - 1 ] &lt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = Min(prev,C[ i ] + trBear[ i ]);\r\n\t\t}\r\n\t\telse if (C[ i ] &gt; prev)\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = C[ i ] - trBull[ i ];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttrailArray[ i ] = C[ i ] + trBear[ i ];\t\r\n\t\t}\r\n\t}\r\n\treturn trailArray;\r\n}\r\n\r\nper = 20;\r\nmultBull = 2;\r\nmultBear = 2;\r\n\r\ntrBull = multBull * ATR(per);\r\ntrBear = multBear * ATR(per);\r\n\r\ntrailArray = vstop_func(trBull,trBear);\r\ns0=trailArray;\r\n\r\ns1= s0 &gt; C ;\r\ns2= s0 &lt;C ;\r\nccresult1 = WriteIf( s1,"cu", "");\r\n ccresult2 = WriteIf( s2,"cd", "");\r\n\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorRed);\r\nGfxSetTextColor( ParamColor("Color",colorRed) );\r\nHor=Param("Horizontal Position",30,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\n\r\nif ( ccresult1 =="cu")\r\n\r\n\r\n{\r\n GfxTextOut(""+s0,Hor , Ver );\r\n}\r\nelse\r\n\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorGreen );\r\nGfxSetTextColor( ParamColor("Color",colorGreen) );\r\nHor=Param("Horizontal Position",75,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\n\r\n if ( ccresult2 =="")\r\n\r\n{\r\nGfxTextOut(""+s0,Hor , Ver );\r\n}\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("traing s2");\r\n\r\ns0=trailArray;\r\n\r\ns1= s0 &gt; C ;\r\ns2= s0 &lt;C ;\r\nccresult1 = WriteIf( s1,"cu", "");\r\n ccresult2 = WriteIf( s2,"cd", "");\r\n\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorBrightGreen );\r\nGfxSetTextColor( ParamColor("Color",colorBrightGreen) );\r\nHor=Param("Horizontal Position",30,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\n\r\nif ( ccresult2 =="cd")\r\n\r\n\r\n{\r\n GfxTextOut(""+s0,Hor , Ver );\r\n}\r\nelse\r\n\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorWhite );\r\nGfxSetTextColor( ParamColor("Color",colorWhite) );\r\nHor=Param("Horizontal Position",75,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\n\r\n if ( ccresult1 =="")\r\n\r\n{\r\nGfxTextOut(""+s0,Hor , Ver );\r\n}\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Signal Panel");\r\nno=10;\r\nres=HHV(H,no);\r\nsup=LLV(L,no);\r\navd=IIf(C&gt;Ref(res,-1),1,IIf(C&lt;Ref(sup,-1),-1,0));\r\navn=ValueWhen(avd!=0,avd,1);\r\ns5d=IIf(avn==1,sup,res);\r\n\r\nsloss = s0;\r\n a=Cross(C,sloss);\r\n b=Cross(sloss,C);\r\n\r\n Buyperiods=Param("Breakout periods best is usually 18",5,1,100,1,1);\r\n Sellperiods=Param("Exit Breakout",5,1,100,1,1);\r\n\r\n HaClose =EMA((O+H+L+C)/4,3); // Woodie \r\n //HaClose =(O+H+L+C)/4; \r\n HaOpen = AMA( Ref( HaClose, -1 ), 0.5 ); \r\n HaHigh = Max( H, Max( HaClose, HaOpen ) ); \r\n HaLow = Min( L, Min( HaClose, HaOpen ) ); \r\n Buy= a;\r\n Sell=b;\r\n//Short = Sell;\r\n//Cover = Buy;\r\n\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\n\r\n\r\n \r\n showsl = ParamToggle("Stop Loss Line", "Show|Hide", 0);\r\n\r\n style = a * styleStaircase + b * styleStaircase;\r\n\r\n PlotShapes(a,style, IIf(a,colorGreen,colorRed), 0, IIf(a,Low,High));\r\n if (showsl == 0) \r\n Plot(sloss,"",colorYellow,styleLine);\r\n exitlong = Cross(sloss, H);\r\n PlotShapes(exitlong * shapeNone, colorBlack,0,H,-10);\r\n exitshort = Cross(L, sloss);\r\n PlotShapes(exitshort * shapeNone, colorBlack,0,L,-15);\r\n\r\n PlotShapes( IIf( Buy, shapeSmallUpTriangle, shapeNone ), colorGreen, layer = 0,yposition = HaLow, offset = -30);\r\n\r\n PlotShapes( IIf( Sell, shapeSmallDownTriangle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = -30);\r\n \r\n//Short = ExRem(Short, Cover);\r\n//Cover = ExRem(Cover, Short);\r\nAlertIf( Buy, "", "Buy @ " + C, 1 );\r\nAlertIf( Sell, "", "Sell @ " + C, 2 );\r\n \r\nfor(i=BarCount-1;i&gt;1;i--)\r\n{\r\nif(Buy[i] == 1)\r\n{\r\nentry = C[i];\r\nsig = "Buy";\r\nsl = s5d[i];\r\ntar1 = entry + (entry * .0048);\r\ntar2 = entry + (entry * .0085);\r\ntar3 = entry + (entry * .0145);\r\n \r\nbars = i;\r\ni = 0;\r\n}\r\nif(Sell[i] == 1)\r\n{\r\nsig = "Sell";\r\nentry = C[i];\r\nsl = s5d[i];\r\ntar1 = entry - (entry * .0049);\r\ntar2 = entry - (entry * .0088);\r\ntar3 = entry - (entry * .0149);\r\n \r\n \r\nbars = i;\r\ni = 0;\r\n}\r\n}\r\nOffset = 20;\r\nClr = IIf(sig == "Buy", colorLime, colorRed);\r\nssl = IIf(bars == BarCount-1, s5d[BarCount-1], Ref(s5d, -1));\r\n//s1 = ssl[BarCount-1];\r\n \r\nPlot(LineArray(bars-Offset, tar1, BarCount, tar1,1), "", Clr, styleLine|styleDashed, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar2, BarCount, tar2,1), "", Clr, styleLine|styleDashed, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar3, BarCount, tar3,1), "", Clr, styleLine|styleDashed, Null, Null, Offset);\r\n \r\n//Plot(LineArray(bars-Offset, s1, BarCount, s0,1), "", colorWhite, styleLine|styleLine, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, entry, BarCount, entry,1), "", colorLightBlue, styleLine|styleDots, Null, Null, Offset);\r\n \r\nfor (i=bars; i &lt;BarCount;i++)\r\n{\r\nPlotText(""+sig+"@"+entry, BarCount+3,entry,Null,colorLightBlue);\r\nPlotText("T1 "+tar1,BarCount+3,tar1,Null,Clr);PlotText("T2 "+tar2,BarCount+3,tar2,Null,Clr);PlotText ("T3 "+tar3,BarCount+3,tar3,Null,Clr);\r\n \r\n}\r\n \r\nmessageboard = ParamToggle("Message Board","Show|Hide",1);\r\nif (messageboard == 1 )\r\n{\r\nGfxSelectFont( "Tahoma", 12, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorWhite );\r\n \r\nif ( sig =="Buy")\r\n{\r\nGfxSelectSolidBrush( colorBlue ); // this is the box background color\r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( colorRed ); // this is the box background color\r\n}\r\npxHeight = Status( "pxchartheight" ) ;\r\nxx = Status( "pxchartwidth");\r\nLeft = 1100;\r\nwidth = 320;\r\nx = 5;\r\nx2 = 240;\r\n \r\ny = pxHeight;\r\n \r\n//GfxSelectPen( colorLavender, 1); // broader color\r\nGfxRoundRect( x, y - 142, x2, y-20 , 7, 7 ) ;\r\n//GfxTextOut( Name(),12,y-140);\r\n//GfxTextOut( " Last Traded Price = "+  C , 08,y- 120 );\r\n//GfxTextOut( ( "Signal Panel"),160,y-140);\r\nGfxTextOut( ("( " + (BarCount-bars-1) * Interval()/60 + " mins ago )"), 120, y-140) ; // The text format location\r\nGfxTextOut( ("" + WriteIf(sig =="Buy",sig + "@ ",sig + " @") + " : " + entry), 10, y-140);\r\nGfxTextOut( ("SL : " + s0 + " (P/L:" + WriteVal(IIf(sig == "Sell",entry-sl,sl-entry), 2.2) + ")"), 10, y-60);\r\nGfxTextOut( ("TGT 1 : " + tar1), 13, y -120);\r\nGfxTextOut( ("TGT 2 : " + tar2), 13, y -100);\r\nGfxTextOut( ("TGT 3 : " + tar3), 13, y -80);\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 10, y-40);;\r\n \r\n}\r\n\r\n\r\n Buy= C&gt;Ref(HHV(High,Buyperiods),-1) ;\r\n Sell= C&lt;Ref(LLV(Low,Sellperiods),-1);\r\n\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\n\r\n PlotShapes( IIf( Buy, shapeHollowCircle, shapeNone ), colorGreen, layer = 0,yposition = HaLow, offset = -60);\r\n PlotShapes( IIf( Sell, shapeHollowCircle, shapeNone ), colorRed, layer = 0, yposition = HaHigh, offset = 60);\r\n \r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("CMP");\r\nGfxSelectFont("arial", 13, 700 ); GfxSetBkMode( colorWhite );\r\nGfxSetTextColor( ParamColor("Color",colorWhite) );\r\nHor=Param("Horizontal Position",120,10,1200,1);\r\nVer=Param("Vertical Position",185,100,50,50);\r\nGfxTextOut(""+C,Hor , Ver );\r\n\r\n\r\n_SECTION_END();\r\n_SECTION_BEGIN("buycircle");\r\nGfxSelectFont( "Arial", 10, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorBlue );\r\nGfxSelectPen( colorBlue, 1 );\r\nif ( ccresult2 =="cd")\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,255,0) ); \r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,0,94) );\r\n} \r\nGfxCircle( 20,40,7 );\r\n\r\n_SECTION_END();\r\n_SECTION_BEGIN("sellcircle");\r\nGfxSelectFont( "Arial", 10, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorBlue );\r\nGfxSelectPen( colorBlue, 1 );\r\nif ( ccresult1 =="cu")\r\n{\r\nGfxSelectSolidBrush( ColorRGB(255,0,0) ); \r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( ColorRGB(0,0,94) );\r\n} \r\n\r\nGfxCircle( 180,40,7 );\r\n_SECTION_END();\r\n</Formula>
		</File>
		<File>
			<Path>as2.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as3.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as4.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as5.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as6.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as7.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>C:\\buysellcharts\\buysellcharts\\_proplus.afl</Path>
			<Formula>_SECTION_BEGIN("AUTO BUY SELL SIGNALS");\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n\r\n_N(Title = StrFormat(" {{DATE}}       Open - %g,       High - %g,       Low - %g,        Close - %g (%.1f%%)       {{VALUES}}", O, H, L, C, SelectedValue( ROC( C, 1 ) ) ));\r\n//\r\n_SECTION_BEGIN("Time Left");\r\nfunction GetSecondNum()\r\n{\r\nTime = Now( 4 );\r\nSeconds = int( Time % 100 );\r\nMinutes = int( Time / 100 % 100 );\r\nHours = int( Time / 10000 % 100 );\r\nSecondNum = int( Hours * 60 * 60 + Minutes * 60 + Seconds );\r\nreturn SecondNum;\r\n}\r\nRequestTimedRefresh( 1 );\r\nTimeFrame = Interval();\r\nSecNumber = GetSecondNum();\r\nNewperiod = SecNumber % TimeFrame == 0;\r\nSecsLeft = SecNumber - int( SecNumber / TimeFrame ) * TimeFrame;\r\nSecsToGo = TimeFrame - SecsLeft;\r\n\r\nx=Param("xposn",550,0,1000,1);\r\ny=Param("yposn",40,0,1000,1);\r\n\r\nGfxSelectSolidBrush( ColorRGB( 230, 230, 230 ) );\r\nGfxSelectPen( ColorRGB( 230, 230, 230 ), 2 );\r\nif ( NewPeriod )\r\n{\r\nGfxSelectSolidBrush( colorYellow );\r\nGfxSelectPen( colorYellow, 2 );\r\n//Say( "New period" );\r\n}\r\n//GfxRoundRect( x+45, y+40, x-3, y-2, 0, 0 );\r\n//GfxSetBkMode(colorWhite );\r\nGfxSetBkMode( colorWhite );\r\nGfxSelectFont( "Times New Roman", 14, 700,True );\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut( "Time Left :"+SecsToGo+"", x, y );\r\n\r\n_SECTION_END();\r\nmessageboard = ParamToggle("Message Board","Show|Hide",0);\r\nshowsl = ParamToggle("Stop Loss Line", "Show|Hide", 0);\r\nno=25;\r\nres=HHV(H,no);\r\nsup=LLV(L,no);\r\navd=IIf(C&gt;Ref(res,-1),1,IIf(C&lt;Ref(sup,-1),-1,0));\r\navn=ValueWhen(avd!=0,avd,1);\r\ns5d=IIf(avn==1,sup,res);\r\nexitshort=Cross(C,s5d);\r\nexitlong=Cross(s5d,C);\r\n\r\nBarColors = \r\nIIf(BarsSince(exitshort) &lt; BarsSince(exitlong) \r\nAND BarsSince(exitshort)!=0, colorGreen,\r\nIIf(BarsSince(exitlong) &lt; BarsSince(exitshort)\r\nAND BarsSince(exitlong)!=0,  colorRed, colorGold));\r\n\r\nea = EMA (C,10);\r\neb = EMA (C,20);\r\n\r\nHACLOSE=(O+H+L+C)/4;\r\nHaOpen = AMA( Ref( HaClose,  -1 ),  0.5 );\r\nHaHigh = Max( H,  Max( HaClose,  HaOpen ) );\r\nHaLow = Min( L,  Min( HaClose,  HaOpen ) );\r\n\r\n\r\n\r\nif( ParamToggle("Plot Heikin-Ashi", "No,Yes", 1 ) ){\r\n\r\n\r\n\tSetBarFillColor( IIf( ea &gt; eb, colorGreen, COLORrgb(255, 22, 22) ) ); \r\n\tPlot( C, "Price", IIf( ea &gt; eb, colorBrightGreen, colorRed ), styleCandle );\r\n}\r\n   \r\nelse{\r\n\tPlotOHLC( HaOpen, HaHigh, HaLow, HaClose, "Heikin Ashi " + Name(), colorBlack, styleCandle );\r\n\t\r\n}\r\n\r\n\r\n//Plot(C, "Close", BarColors,  styleNoTitle | ParamStyle("Style") | GetPriceStyle() ) ;\r\nif (showsl == 0)\r\n{\r\n//Plot(s5d,"",colorCustom10,styleLine);}\r\nexitlong = Cross(s5d, C);\r\n//PlotShapes(exitlong * shapeSquare, colorRed,0,H,40);\r\n//PlotShapes(exitlong * shapeSquare, colorOrange,0,H,50);\r\n//PlotShapes(exitlong * shapeDownArrow, colorWhite,0,H,-45);\r\n\r\nexitshort = Cross(C, s5d);\r\n//PlotShapes(exitshort * shapeSquare, colorLime,0,L,-40);\r\n//PlotShapes(exitshort * shapeSquare, colorBrightGreen,0,L,-50);\r\n//PlotShapes(exitshort * shapeUpArrow, colorWhite,0,L,-45);\r\n\r\n\r\n\r\n\r\n_SECTION_BEGIN("mudra");\r\n\r\n//\r\nLength=Param("Length",17, 2); // Bollinger Bands Period\r\nDeviation=Param("Deviation",2);\r\n// Deviation was 3\r\nMoneyRisk=Param("Money Risk", 1);\r\n\r\nLineStyle=ParamToggle("Display line mode", "No|Yes", 0);  // Display line mode: 0-no,1-yes  \r\ncUpTrendLine = ParamColor("UpTrendLine", colorGreen);\r\ncDnTrendLine = ParamColor("DownTrendLine", colorRed);\r\n\r\n// Offset Factor\r\nTurnedUp=Nz(StaticVarGet("TurnedUp"));\r\nTurnedDown=Nz(StaticVarGet("TurnedDown"));\r\nSoundON = ParamToggle("Sound","Off|On",1);\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\n\r\nBuy = ea &gt; eb AND TimeNum() &gt; 092000 AND TimeNum() &lt; 150000;\r\nSell = eb &gt; ea OR TimeNum() &gt; 150000;\r\nShort = 0;\r\nCover = 0;\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\nShort = ExRem(Short,Cover);\r\nCover = ExRem(Cover,Short);\r\n\r\nTitle = StrFormat(" "); \r\n\r\nSetChartBkGradientFill( ParamColor("BgTop", ColorRGB( 0,0,0 )),ParamColor("BgBottom", ColorRGB( 0,0,0 )),ParamColor("titleblock",ColorRGB( 0,0,0 ))); \r\n\r\nSetTradeDelays(1,1,1,1);\r\n\r\n\r\nFactor=2;\r\nPd=10;\r\nUp=(H+L)/2+(Factor*ATR(Pd));\r\nDn=(H+L)/2-(Factor*ATR(Pd));\r\niATR=ATR(Pd);\r\nTrendUp=TrendDown=Null;\r\ntrend[0]=1;\r\nchangeOfTrend=0;\r\nflag=flagh=0;\r\n\r\nfor (i = 1; i &lt;BarCount; i++) {\r\n      TrendUp[i] = Null;\r\n      TrendDown[i] = Null;\r\n     \r\n      trend[i]=1;\r\n   \r\n      \r\n      if (Close[i]&gt;Up[i-1]) {\r\n         trend[i]=1;\r\n         if (trend[i-1] == -1) changeOfTrend = 1;\r\n         \r\n      }\r\n      else if (Close[i]&lt;Dn[i-1]) {\r\n         trend[i]=-1;\r\n         if (trend[i-1] == 1) changeOfTrend = 1;\r\n      }\r\n      else if (trend[i-1]==1) {\r\n         trend[i]=1;\r\n         changeOfTrend = 0;       \r\n      }\r\n      else if (trend[i-1]==-1) {\r\n         trend[i]=-1;\r\n         changeOfTrend = 0;\r\n      }\r\n\r\n      if (trend[i]&lt;0 &amp;&amp; trend[i-1]&gt;0) {\r\n         flag=1;\r\n      }\r\n      else {\r\n         flag=0;\r\n      }\r\n      \r\n      if (trend[i]&gt;0 &amp;&amp; trend[i-1]&lt;0) {\r\n         flagh=1;\r\n      }\r\n      else {\r\n         flagh=0;\r\n      }\r\n      \r\n      if (trend[i]&gt;0 &amp;&amp; Dn[i]&lt;Dn[i-1]){\r\n         Dn[i]=Dn[i-1];\r\n\t\t}\r\n      \r\n      if (trend[i]&lt;0 &amp;&amp; Up[i]&gt;Up[i-1])\r\n        { Up[i]=Up[i-1];\r\n\t\t}\r\n      \r\n      if (flag==1)\r\n       {  Up[i]=(H[i]+L[i])/2+(Factor*iATR[i]);;\r\n        } \r\n      if (flagh==1)\r\n        { Dn[i]=(H[i]+L[i])/2-(Factor*iATR[i]);;\r\n         }\r\n      if (trend[i]==1) {\r\n         TrendUp[i]=Dn[i];\r\n         if (changeOfTrend == 1) {\r\n            TrendUp[i-1] = TrendDown[i-1];\r\n            changeOfTrend = 0;\r\n         }\r\n      }\r\n      else if (trend[i]==-1) {\r\n         TrendDown[i]=Up[i];\r\n         if (changeOfTrend == 1) {\r\n            TrendDown[i-1] = TrendUp[i-1];\r\n            changeOfTrend = 0;\r\n         }\r\n      }\r\n   } \r\n\r\nPlot(TrendUp,"Trend",colorYellow);\r\nPlot(TrendDown,"Down",colorYellow);\r\n\r\nBuy = trend==1;\r\nSell=trend==-1;\r\n\r\nBuy=ExRem(Buy,Sell);\r\nSell=ExRem(Sell,Buy);\r\nShort=Sell;\r\nCover=Buy;\r\n\r\n\r\nBuyPrice=ValueWhen(Buy,C);\r\nSellPrice=ValueWhen(Sell,C);\r\nShortPrice=ValueWhen(Short,C);\r\nCoverPrice=ValueWhen(Cover,C);\r\n\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0, L, Offset=-40);\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorLime, 0,L, Offset=-50);                      \r\nPlotShapes(IIf(Buy, shapeUpArrow, shapeNone),colorWhite, 0,L, Offset=-45); \r\nPlotShapes(IIf(Short, shapeSquare, shapeNone),colorRed, 0, H, Offset=40);\r\nPlotShapes(IIf(Short, shapeSquare, shapeNone),colorOrange, 0,H, Offset=50);                      \r\nPlotShapes(IIf(Short, shapeDownArrow, shapeNone),colorWhite, 0,H, Offset=-45);\r\n\r\nTrendSL=IIf(trend==1,TrendUp,TrendDown);\r\n\r\n\r\n\r\n\r\n//Buy = exitshort;\r\n//Sell = exitlong;\r\n//Short = Sell;\r\n//Cover = Buy;\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\nShort = ExRem(Short, Cover);\r\nCover = ExRem(Cover, Short);\r\n\r\n\r\n\r\n dist =0.5* ATR(10);\r\ndist1 = 2*ATR(10);\r\n for (i=0; i&lt;BarCount; i++) {\r\n if ( SoundON==True &amp;&amp; !TurnedUp &amp;&amp; Buy[i] &amp;&amp; i==BarCount-1 ){\r\n PlotText("Buy:" + C[ i ], i, L[ i ]-3*dist[i], colorWhite, colorGreen);\r\n Say("Attention please, Buy call, Generated");\r\n TurnedUp=StaticVarSet("TurnedUp",1);\r\n TurnedDown=StaticVarSet("TurnedDown",0);\r\n }\r\nif ( Cover[i] )\r\n PlotText("Buy:" + C[ i ], i, L[ i ]-3*dist[i], colorWhite, colorGreen);\r\n\r\n\r\n if ( SoundON==True &amp;&amp; !TurnedDown &amp;&amp; Sell[i] &amp;&amp; i==BarCount-1 ){\r\n  PlotText("Sell:" + C[ i ], i, H[ i ]+3*dist[i], colorWhite, colorRed);\r\n  Say("Attention please, Sell call, Generated");\r\n  TurnedUp=StaticVarSet("TurnedUp",0);\r\n  TurnedDown=StaticVarSet("TurnedDown",1);\r\n }\r\n if ( Short[i] )\r\n PlotText("Sell:" + C[ i ], i, H[ i ]+3*dist[i], colorWhite, colorRed);\r\n }\r\n\r\n\r\n\r\nAlertIf( Buy, "", "BUY @ " + C, 1 );\r\nAlertIf( Sell, "", "SELL @ " + C, 2 );\r\n\r\nfor(i=BarCount-1;i&gt;1;i--)\r\n{\r\nif(Buy[i] == 1)\r\n{\r\nentry = C[i];\r\nsig = "BUY";\r\nsl = s5d[i];\r\ntar1 = entry + (entry * .0035);\r\ntar2 = entry + (entry * .0085);\r\ntar3 = entry + (entry * .0150);\r\nbars = i;\r\ni = 0;\r\n}\r\nif(Sell[i] == 1)\r\n{\r\nsig = "SELL";\r\nentry = C[i];\r\nsl = s5d[i];\r\ntar1 = entry - (entry * .0035);\r\ntar2 = entry - (entry * .0085);\r\ntar3 = entry - (entry * .0150);\r\nbars = i;\r\ni = 0;\r\n}\r\n}\r\nOffset = 20;\r\nClr = IIf(sig == "BUY", colorGreen, colorRed);\r\nssl = IIf(bars == BarCount-1, s5d[BarCount-1], Ref(s5d, -1));\r\nsl = ssl[BarCount-1];\r\n\r\nPlot(LineArray(bars-Offset, tar1, BarCount, tar1,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar2, BarCount, tar2,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar3, BarCount, tar3,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\n\r\nfor (i=bars; i &lt;BarCount;i++)\r\n{\r\nPlotText("" + sig + " @ " + entry, BarCount+3, entry, Null, colorBlue);\r\nPlotText("Target 1 : " + tar1, BarCount+3, tar1, Null, Clr);\r\nPlotText("Target 2 : @ " + tar2, BarCount+3, tar2, Null, Clr);\r\nPlotText("Target 3 : @ " + tar3, BarCount+3, tar3, Null, Clr);\r\nPlotText("Trailing SL @ " + sl, BarCount+3, sl, Null, colorBlack);\r\n}\r\n//Plot(sl, "", colorCustom10, styleLine);\r\nprintf("Last " + sig + " Signal came " + (BarCount-bars) + " bars ago");\r\nprintf("\\n" + sig + " @ : " + entry + "\\nStop Loss : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"+ "\\nTarget_1 : " + tar1 + "\\nTarget_2 : " + tar2 + "\\nTarget_3 : " + tar3);\r\nprintf("\\nCurrent P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2));\r\n\r\nif (messageboard == 0 )\r\n{\r\nGfxSelectFont( "Arial", 11, 100 );\r\nGfxSetBkMode( 1 );\r\nGfxSetTextColor( colorWhite );\r\n\r\nif ( sig =="BUY")\r\n{\r\nGfxSelectSolidBrush( colorBlack ); // this is the box background color\r\nGfxSetTextColor( colorLime );\r\n\r\n}\r\nelse\r\n{\r\nGfxSelectSolidBrush( colorBlack ); // this is the box background color\r\nGfxSetTextColor( colorRed );\r\n\r\n}\r\n\r\n\r\npxHeight = Status( "pxchartheight" ) ;\r\nxx = Status( "pxchartwidth");\r\nLeft = 1100;\r\nwidth = 280;\r\nx = 2;\r\nx2 = 250;\r\n\r\ny = pxHeight;\r\n\r\nGfxSelectPen( colorYellow, 1); // broader color\r\nGfxRectangle( x, y - 170, x2, y ) ;\r\n\r\nGfxTextOut( ("* PRO PLUS *"),55,y-160);\r\nGfxSelectFont( "Arial", 11, 100 );\r\nGfxTextOut( ("Last " + sig + " Signal came " + (BarCount-bars-1) * Interval()/60 + " mins ago"), 12, y-140) ; // The text format location\r\nGfxTextOut( ("" + WriteIf(sig =="BUY",sig + " @ ",sig + " @") + " : " + entry), 52, y-120);\r\nGfxTextOut( ("Trailing SL : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"), 43, y-100);\r\nGfxTextOut( ("Target:1 : " + tar1), 52, y -80);\r\nGfxTextOut( ("Target:2 : " + tar2), 52,y-60);\r\nGfxTextOut( ("Target:3 : " + tar3), 52,y-40);\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 47, y-22);;\r\n\r\nx = 290;\r\nx2 = 570;\r\nGfxSelectSolidBrush( colorTurquoise );\r\nGfxSetTextColor( colorBlack);\r\nGfxSelectFont( "Tahoma", 14, 100 );\r\nGfxSetBkMode( 1 );\r\n\r\nGfxSelectFont( "Tahoma", 10, 400 );\r\n\r\n}\r\n//\r\n}\r\nfunction PlotIndicators()\r\n{\r\n\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n/* Standard Error Bands */\r\nPeriods = Param("Standard Error", 80, 3, 200, 1);\r\nSmooth = Param("Smooth",14,2,100,1);\r\n\r\n\r\nLRCurve = LinearReg( C, periods );\r\nMALRCurve = MA(LRCurve, Smooth);\r\nSEValue = StdErr( C, periods );\r\nSErrorAvg = MA(SEValue, Smooth);\r\n\r\nLowerBand = MALRCurve - SErrorAvg ;\r\nUpperBand = MALRCurve + SErrorAvg ;\r\n\r\nPlot( MALRCurve , "MidBand", ParamColor("ColorMB",colorIndigo) , styleDashed|styleNoTitle);\r\nPlot( LowerBand , "LowerBand", ParamColor("ColorLo",colorOrange) , styleLine|styleThick|styleNoTitle);\r\nPlot( UpperBand , "UpperBand", ParamColor("ColorUp",colorGreen) , styleLine|styleThick|styleNoTitle);\r\n\r\nCh = TimeFrameGetPrice("C", in1Minute/60);\r\nclr = IIf(Ch[BarCount-2] &gt; Ch[BarCount-1],colorRed,colorLime);\r\n\r\nPlot(LineArray(0,C[BarCount-1],BarCount-1,C[BarCount-1],15), "", Clr, styleLine|styleNoLabel, Null, Null, 30);\r\nPlotText("CMP:" + C[BarCount-1], BarCount+5, C[BarCount-1],colorBlack,Clr);\r\n\r\nLRPeriods = Param("Length", 40, 3, 200, 1);\r\nLRCurve = LinearReg( C, LRPeriods );\r\n\r\nPlotLR = IIf(LRCurve &lt; LowerBand, (LRCurve + LowerBand)/2, IIf(LRCurve &gt; UpperBand, (LRCurve + UpperBand)/2, LRCurve));\r\nPlotLR = (PlotLR + SwingLine)/2;\r\n//Plot( PlotLR , "Stop Loss |", ParamColor("SLColor",colorBlue), 4+8+32+2048);\r\n//Plot( SwingLine, "SwingLine", ParamColor( "SWColor", colorBlue ), ParamStyle("StyleSW",style=styleThick|styleNoLabel , mask=maskDefault) );\r\n\r\nbc1 = (Cross(C, MALRCurve) OR Cross(C, UpperBand) OR Cross(C, LowerBand)) AND (C &gt; SwingLine);\r\nbc2 = Cross(C, SwingLine) AND (C &gt; MALRCurve OR C &gt; UpperBand OR C &gt; LowerBand);\r\n\r\nsc1 = (Cross(MALRCurve, C) OR Cross(UpperBand, C) OR Cross(LowerBand, C)) AND (C &lt; SwingLine);\r\nsc2 = Cross(SwingLine, C) AND (C &lt; MALRCurve OR C &lt; UpperBand OR C &lt; LowerBand);\r\nBuy = bc1 OR bc2;\r\nSell = sc1 OR sc2;\r\nBuy = ExRem(Buy, Sell);\r\nSell = ExRem(Sell, Buy);\r\n//PlotShapes(shapeCircle*Buy + shapeCircle *Sell, IIf(Buy, colorBlue, colorRed), 0, IIf(Buy, L, H), IIf(Buy, -12, 12));\r\n\r\n}\r\n//PlotDT();\r\n\r\np1 = Param("TL 1 Periods", 20, 5, 50, 1);\r\np2 = Param("TL 2 Periods", 5, 3, 25, 1);\r\nTL1 = LinearReg(C, p1);\r\nTL2 = EMA(TL1, p2);\r\nCol1 = IIf(TL1 &gt; TL2, ParamColor("TL Up Colour", colorBrightGreen), ParamColor("TL Dn Colour", colorRed));\r\nPlot(TL1, "TriggerLine 1", Col1, styleLine|styleThick|styleNoLabel);\r\nPlot(TL2, "TriggerLine 2", Col1, styleNoLine|styleThick|styleNoLabel);\r\n\r\n\r\n//icol = IIf ( MA (Close,25) &gt; Ref (MA (Close,25),-1),colorBrightGreen,colorRed);\r\n\r\n\r\n//Plot( MA( High, 25 ),"", icol, styleThick);\r\n//Plot( EMA( High, 5 ),"", icol, styleThick);\r\nColor_buy = IIf(Close &gt; EMA(Close,89) AND Close &gt; EMA(High,25),colorBlue,IIf(Close &lt; EMA(Close,89) AND Close &lt; EMA(Low,25),colorRed,colorYellow));\r\n\r\n//PlotOHLC( Open, High, Low, Close, "", Color_buy, styleCandle );\r\n\r\ncrossup= C&gt;DEMA(C,100);\r\nif(StrToNum(NumToStr(crossup)))bgColor = colorLime;\r\nelse bgColor = colorOrange;\r\nSetChartBkGradientFill( colorBlack, bgColor); \r\n\r\n\r\n//SetChartBkGradientFill( ParamColor("BgTop", colorBlack),\r\n//ParamColor("BgBottom", ColorRGB( 50,47,45 )),ParamColor("titleblock",colorBlack));\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Paste the code below to your price chart somewhere and green ribbon means both\r\n// both MACD and ADX trending up so if the red ribbon shows up the MACD and the ADX \r\n// are both trending down.\r\n\r\n\r\nuptrend=PDI()&gt;MDI()AND Signal()&lt;MACD();\r\ndowntrend=MDI()&gt;PDI()AND Signal()&gt;MACD();\r\n\r\n\r\nPlot( 2, /* defines the height of the ribbon in percent of pane width */"",\r\nIIf( uptrend, colorGreen, IIf( downtrend, colorRed, 0 )), /* choose color */\r\nstyleOwnScale|styleArea|styleNoLabel, -0.5, 100 );\r\n\r\n_SECTION_END();\r\n\r\n\r\n//============== TITLE ==============\r\n_SECTION_BEGIN("Magnified Market Price");\r\n//by Vidyasagar, vkunisetty@yahoo.com//\r\nFS=Param("Font Size",18,30,100,1);\r\nGfxSelectFont("Times New Roman", FS, 900, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor( ParamColor("Color",colorYellow) );\r\n//Hor=Param("Horizontal Position",800,800,800,800);\r\n\r\nTitle = StrFormat(" {{DATE}}       Open - %g,       High - %g,       Low - %g,        Close - %g (%.1f%%) ", O, H, L, C, SelectedValue( ROC( C, 1 ) ) );\r\n\r\n\r\nGfxTextOut(""+C,430 ,40 );\r\nYC=TimeFrameGetPrice("C",inDaily,-1);\r\nDD=Prec(C-YC,2);\r\nxx=Prec((DD/YC)*100,2);\r\nGfxSelectFont("Times New Roman", 12, 700, italic = False, underline = False, True );\r\nGfxSetBkMode( colorWhite );\r\nGfxSetTextColor(ParamColor("Color",colorYellow) );\r\nGfxTextOut(""+DD+" ("+xx+"%)", 420, 70 );\r\n\r\nBuy=xx&gt;=2;\r\n_SECTION_END();\r\n\r\n\r\nDayH = SelectedValue(TimeFrameGetPrice("H", inDaily));// yesterdays high \r\nDayL = SelectedValue(TimeFrameGetPrice("L", inDaily));//low \r\nDayH1 = SelectedValue(TimeFrameGetPrice("H", inDaily, -1));// yesterdays high \r\nDayL1 = SelectedValue(TimeFrameGetPrice("L", inDaily, -1));//low \r\nDayH2 = SelectedValue(TimeFrameGetPrice("H", inDaily, -2));// yesterdays high \r\nDayL2 = SelectedValue(TimeFrameGetPrice("L", inDaily, -2));//low \r\n\r\nRange = ((DayH +DayH1  +DayH2)/3 - (DayL+DayL1+DayL2)/3);\r\nsr3= (Range *0.702)+DayL;\r\nsr4= DayH-(Range *0.655);\r\n\r\nstyle = styleLine | styleNoRescale|styleLine; \r\nPlot(sr3, "SR3",colorOrange  , styleDashed|styleNoRescale|styleThick);\r\nPlot(sr4, "SR4",colorSkyblue ,styleDashed|styleNoRescale|styleThick);\r\n\r\nA = DEMA (H,65);\r\nB = EMA (H,39);\r\nG = DEMA (L,65);\r\nI = EMA(L,39);\r\nD = Min (G,I);\r\nE = Max (A,B);\r\n/* Buy or Sell Condition */\r\nBuy =Cover= Cross(Close,E);\r\nSell = Short=Cross(D,Close);\r\nBuy = ExRem(Buy,Sell);\r\nSell = ExRem(Sell,Buy);\r\nSellPrice=ValueWhen(Sell,C,1);\r\nBuyPrice=ValueWhen(Buy,C,1);\r\n\r\nFilter = Buy OR Sell;\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN( "BASERECTANGEL" );\r\n \r\nGfxSelectFont( "Arial", 10, 100 );\r\n GfxSetBkMode( 1 );\r\n //GfxSetTextColor( colorBlack );\r\n GfxSelectSolidBrush( colorBlack ); \r\n //GfxSelectPen( colorBlack, 1 ); \r\n// broader color \r\n GfxRectangle(2,35,203,230);\r\n\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("Trend Timeframe");\r\n\r\n//1m\r\nec=WriteIf(EMA(C,5)&gt;EMA(C,13) OR EMA(C,5)&lt;EMA(C,13),"One","x");\r\nec2=WriteIf(EMA(C,5)&gt;EMA(C,13) AND EMA(C,5)&gt;EMA(C,20),"On","x");\r\nec3=WriteIf(EMA(C,5)&lt;EMA(C,13) AND EMA(C,5)&lt;EMA(C,20),"Oe","x");\r\n//5m\r\nTimeFrameSet(in5Minute);\r\ne5=EMA(C,5);\r\ne13=EMA(C,13);\r\ne20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne5x5=TimeFrameExpand( e5, in5Minute,expandLast );\r\ne5x13=TimeFrameExpand( e13, in5Minute,expandLast );\r\ne5x20=TimeFrameExpand( e20, in5Minute,expandLast );\r\n\r\n\r\ne5c=WriteIf(e5x5&gt;e5x13 OR e5x5&lt;e5x13,"One","x");\r\ne5c2=WriteIf(e5x5&gt;e5x13 AND e5x5&gt;e5x20,"On","x");\r\ne5c3=WriteIf(e5x5&lt;e5x13 AND e5x5&lt;e5x20,"Oe","x");\r\n\r\n//10m\r\nTimeFrameSet(in5Minute*2);\r\ne5=EMA(C,5);\r\ne13=EMA(C,13);\r\ne20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne5x5=TimeFrameExpand( e5, in5Minute*2,expandLast );\r\ne5x13=TimeFrameExpand( e13, in5Minute*2,expandLast );\r\ne5x20=TimeFrameExpand( e20, in5Minute*2,expandLast );\r\n\r\n\r\ne10c=WriteIf(e5x5&gt;e5x13 OR e5x5&lt;e5x13,"One","x");\r\ne10c2=WriteIf(e5x5&gt;e5x13 AND e5x5&gt;e5x20,"On","x");\r\ne10c3=WriteIf(e5x5&lt;e5x13 AND e5x5&lt;e5x20,"Oe","x");\r\n\r\n\r\n//20m\r\nTimeFrameSet(in5Minute*4);\r\ne5=EMA(C,5);\r\ne13=EMA(C,13);\r\ne20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne5x5=TimeFrameExpand( e5, in5Minute,expandLast );\r\ne5x13=TimeFrameExpand( e13, in5Minute,expandLast );\r\ne5x20=TimeFrameExpand( e20, in5Minute,expandLast );\r\n\r\n\r\ne20c=WriteIf(e5x5&gt;e5x13 OR e5x5&lt;e5x13,"One","x");\r\ne20c2=WriteIf(e5x5&gt;e5x13 AND e5x5&gt;e5x20,"On","x");\r\ne20c3=WriteIf(e5x5&lt;e5x13 AND e5x5&lt;e5x20,"Oe","x");\r\n\r\n//15m\r\nTimeFrameSet(in15Minute);\r\ne15=EMA(C,5);\r\ne113=EMA(C,13);\r\ne120=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne15x5=TimeFrameExpand( e15, in15Minute,expandLast );\r\ne15x13=TimeFrameExpand( e113, in15Minute,expandLast );\r\ne15x20=TimeFrameExpand( e120, in15Minute,expandLast );\r\n\r\ne15c=WriteIf(e15x5&gt;e15x13 OR e15x5&lt;e15x13,"One","x");\r\ne15c2=WriteIf(e15x5&gt;e15x13 AND e15x5&gt;e15x20,"On","x");\r\ne15c3=WriteIf(e15x5&lt;e15x13 AND e15x5&lt;e15x20,"Oe","x");\r\n\r\n//30m\r\nTimeFrameSet(in15Minute*2);\r\ne15=EMA(C,5);\r\ne113=EMA(C,13);\r\ne120=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne15x5=TimeFrameExpand( e15, in15Minute*2,expandLast );\r\ne15x13=TimeFrameExpand( e113, in15Minute*2,expandLast );\r\ne15x20=TimeFrameExpand( e120, in15Minute*2,expandLast );\r\n\r\ne30c=WriteIf(e15x5&gt;e15x13 OR e15x5&lt;e15x13,"One","x");\r\ne30c2=WriteIf(e15x5&gt;e15x13 AND e15x5&gt;e15x20,"On","x");\r\ne30c3=WriteIf(e15x5&lt;e15x13 AND e15x5&lt;e15x20,"Oe","x");\r\n\r\n//45m\r\nTimeFrameSet(in15Minute*3);\r\ne15=EMA(C,5);\r\ne113=EMA(C,13);\r\ne120=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\ne15x5=TimeFrameExpand( e15, in15Minute*3,expandLast );\r\ne15x13=TimeFrameExpand( e113, in15Minute*3,expandLast );\r\ne15x20=TimeFrameExpand( e120, in15Minute*3,expandLast );\r\n\r\ne45c=WriteIf(e15x5&gt;e15x13 OR e15x5&lt;e15x13,"One","x");\r\ne45c2=WriteIf(e15x5&gt;e15x13 AND e15x5&gt;e15x20,"On","x");\r\ne45c3=WriteIf(e15x5&lt;e15x13 AND e15x5&lt;e15x20,"Oe","x");\r\n\r\n\r\n//1h\r\nTimeFrameSet(inHourly);\r\ne51=EMA(C,5);\r\ne131=EMA(C,13);\r\ne201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nehx5=TimeFrameExpand( e51, inHourly,expandLast );\r\nehx13=TimeFrameExpand( e131, inHourly,expandLast );\r\nehx20=TimeFrameExpand( e201, inHourly,expandLast );\r\n\r\nehc=WriteIf(ehx5&gt;ehx13 OR ehx5&lt;ehx13,"One","x");\r\nehc2=WriteIf(ehx5&gt;ehx13 AND ehx5&gt;ehx20,"On","x");\r\nehc3=WriteIf(ehx5&lt;ehx13 AND ehx5&lt;ehx20,"Oe","x");\r\n\r\n//2h\r\nTimeFrameSet(inHourly*2);\r\neh51=EMA(C,5);\r\neh131=EMA(C,13);\r\neh201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\neh2x5=TimeFrameExpand( eh51, inHourly*2,expandLast );\r\neh2x13=TimeFrameExpand( eh131, inHourly*2,expandLast );\r\neh2x20=TimeFrameExpand( eh201, inHourly*2,expandLast );\r\n\r\ne2hc=WriteIf(eh2x5&gt;eh2x13 OR eh2x5&lt;eh2x13,"One","x");\r\ne2hc2=WriteIf(eh2x5&gt;eh2x13 AND eh2x5&gt;eh2x20,"On","x");\r\ne2hc3=WriteIf(eh2x5&lt;eh2x13 AND eh2x5&lt;eh2x20,"Oe","x");\r\n\r\n\r\n//4h\r\nTimeFrameSet(inHourly*4);\r\neh51=EMA(C,5);\r\neh131=EMA(C,13);\r\neh201=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\neh4x5=TimeFrameExpand( eh51, inHourly*4,expandLast );\r\neh4x13=TimeFrameExpand( eh131, inHourly*4,expandLast );\r\neh4x20=TimeFrameExpand( eh201, inHourly*4,expandLast );\r\n\r\ne4hc=WriteIf(eh4x5&gt;eh4x13 OR eh4x5&lt;eh4x13,"One","x");\r\ne4hc2=WriteIf(eh4x5&gt;eh4x13 AND eh4x5&gt;eh4x20,"On","x");\r\ne4hc3=WriteIf(eh4x5&lt;eh4x13 AND eh4x5&lt;eh4x20,"Oe","x");\r\n\r\n//d\r\nTimeFrameSet(inDaily);\r\ned5=EMA(C,5);\r\ned13=EMA(C,13);\r\ned20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\nedx5=TimeFrameExpand( ed5, inDaily,expandLast );\r\nedx13=TimeFrameExpand( ed13, inDaily,expandLast );\r\nedx20=TimeFrameExpand( ed20, inDaily,expandLast );\r\n\r\nedc=WriteIf(edx5&gt;edx13 OR edx5&lt;edx13,"One","x");\r\nedc2=WriteIf(edx5&gt;edx13 AND edx5&gt;edx20,"On","x");\r\nedc3=WriteIf(edx5&lt;edx13 AND edx5&lt;edx20,"Oe","x");\r\n\r\nTimeFrameSet(inWeekly);\r\new5=EMA(C,5);\r\new13=EMA(C,13);\r\new20=EMA(C,20);\r\nTimeFrameRestore();\r\n\r\newx5=TimeFrameExpand( ew5, inWeekly,expandLast );\r\newx13=TimeFrameExpand( ew13, inWeekly,expandLast );\r\newx20=TimeFrameExpand( ew20, inWeekly,expandLast );\r\n\r\newc=WriteIf(ewx5&gt;ewx13 OR ewx5&lt;ewx13,"One","x");\r\newc2=WriteIf(ewx5&gt;ewx13 AND ewx5&gt;ewx20,"On","x");\r\newc3=WriteIf(ewx5&lt;ewx13 AND ewx5&lt;ewx20,"Oe","x");\r\n\r\nHor=Param("Horizontal Position",1,1,1200,1);\r\nVer=Param("Vertical Position",70,30,1000,1);\r\n///1\r\nGfxSelectFont("Callibri", 10 , 700, True );\r\nGfxSetBkMode( colorBlack );\r\nGfxSetTextColor( colorWhite );\r\n//GfxTextOut("Trend ",20, Ver);\r\nGfxSetTextColor( colorWhite );\r\nGfxTextOut("5-MIN ",20, Ver-25);\r\nGfxTextOut("10-MIN ",20, Ver-10);\r\nGfxTextOut("15-MIN ",20, Ver+5);\r\nGfxTextOut("20-MIN ",20, Ver+20);\r\nGfxTextOut("30-MIN ",20, Ver+35);\r\nGfxTextOut("45-MIN ",20, Ver+50);\r\nGfxTextOut("WEEKLY ",20, Ver+75);\r\nGfxTextOut("DAILY ",20, Ver+90);\r\nGfxTextOut("4-HOURS ",20, Ver+105);\r\nGfxTextOut("2-HOURS ",20, Ver+120);\r\nGfxTextOut("1-HOURS ",20, Ver+135);\r\n\r\nif(e5c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e5c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e5c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxSelectPen( colorBlack, 1 ); // broader color\r\nGfxRectangle( Hor+80,Ver-10,Hor+115,Ver-23 );\r\n///2\r\nGfxSetTextColor( colorWhite );\r\n\r\n\r\nif(e10c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e10c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e10c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+80,Ver+5,Hor+130,Ver-8 );\r\n///3\r\nGfxSetTextColor( colorWhite );\r\n\r\n\r\nif(e15c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e15c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e15c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+80,Ver+22,Hor+145,Ver+8 );\r\n///4\r\nGfxSetTextColor( colorWhite );\r\n\r\n\r\nif(e20c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e20c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e20c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+80,Ver+37,Hor+160,Ver+24 );\r\n//4\r\nif(e30c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e30c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e30c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+80,Ver+51,Hor+175,Ver+38 );\r\nGfxSetTextColor( colorWhite );\r\n\r\nif(e45c=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e45c2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e45c3=="Oe")\r\nGfxSelectSolidBrush(colorRed);\r\nGfxRectangle( Hor+80,Ver+65,Hor+190,Ver+52 );\r\n\r\nif(ewc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ewc2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(ewc3=="Oe")\r\nGfxSelectSolidBrush(colorGreen);\r\nGfxRectangle( Hor+80,Ver+88,Hor+190,Ver+75 );\r\n\r\n\r\nif(edc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(edc2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(edc3=="Oe")\r\nGfxSelectSolidBrush(colorGreen);\r\nGfxRectangle( Hor+80,Ver+104,Hor+175,Ver+90 );\r\n\r\nif(e4hc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e4hc2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e4hc3=="Oe")\r\nGfxSelectSolidBrush(colorGreen);\r\nGfxRectangle( Hor+80,Ver+118,Hor+160,Ver+105 );\r\n\r\nif(e2hc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(e2hc2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(e2hc3=="Oe")\r\nGfxSelectSolidBrush(colorGreen);\r\nGfxRectangle( Hor+80,Ver+133,Hor+145,Ver+120 );\r\n\r\nif(ehc=="One")\r\nGfxSelectSolidBrush(colorGold);\r\nif(ehc2=="On")\r\nGfxSelectSolidBrush(colorGreen);\r\nif(ehc3=="Oe")\r\nGfxSelectSolidBrush(colorGreen);\r\nGfxRectangle( Hor+80,Ver+148,Hor+130,Ver+135 );\r\n\r\n\r\n_SECTION_END();\r\n\r\n</Formula>
		</File>
		<File>
			<Path>C:\\buysellcharts\\buysellcharts\\_options.afl</Path>
			<Formula>\r\n_SECTION_BEGIN("Chart Settings");\r\n    SetChartOptions(0,chartShowArrows|chartShowDates);\r\n    SetChartBkColor(ParamColor("Outer Panel",colorGreen));\r\n    SetChartBkGradientFill(ParamColor("Upper Chart",colorViolet),ParamColor("Lower Chart",colorViolet));\r\n    GraphXSpace=Param("GraphXSpace",10,0,100,1);\r\n    dec = (Param("Decimals",2,0,7,1)/10)+1;\r\n    bi = BarIndex();\r\n    Lbi = LastValue(BarIndex());\r\n    sbi = SelectedValue(bi);\r\n    x1= BarCount-1;\r\n_SECTION_END();\r\n\r\n_SECTION_BEGIN("NICK MA Swing");\r\nSetBarsRequired(200,0);\r\n\r\nx = 5;\r\n\r\ny=Param("yposn",1,0,1000,1);\r\n\r\n\r\n\r\nGraphXSpace = 5;\r\nSetChartOptions(0,chartShowArrows|chartShowDates);\r\nno=Param( "Swing", 9, 1, 55 );\r\nres=HHV(H,no);\r\nsup=LLV(L,no);\r\navd=IIf(C&gt;Ref(res,-1),1,IIf(C&lt;Ref(sup,-1),-1,0));\r\navn=ValueWhen(avd!=0,avd,1);\r\ntsl=IIf(avn==1,sup,res);\r\nBuy=Cover=Cross(H,tsl) ;\r\nSell=Short=Cross(tsl,L) ;\r\n\r\n\r\nSellperiods=Ref(Param("Exit Breakout",20,1,100,1,1),-1);\r\n\r\nSell= C&lt;Ref(LLV(Low,Sellperiods),-1);\r\nBuy = ExRem(Buy, Sell);\r\nSell = ExRem(Sell, Buy);\r\nCover = Buy;\r\nShort = Sell;\r\nCover = ExRem(Buy,Sell);\r\nShort = ExRem(Sell,Buy);\r\n\r\nHACLOSE=(O+H+L+C)/4;\r\nHaOpen = AMA( Ref( HaClose,  -1 ),  0.5 );\r\nHaHigh = Max( H,  Max( HaClose,  HaOpen ) );\r\nHaLow = Min( L,  Min( HaClose,  HaOpen ) );\r\nif( ParamToggle("Plot Heikin-Ashi", "No,Yes", 1 ) )\r\n   PlotOHLC( HaOpen, HaHigh, HaLow, HaClose, "Heikin Ashi " + Name(), colorBlack, styleCandle );\r\nelse\r\n Plot( C, "Regular candles " + Name(), colorBlack, styleCandle );\r\n\r\n\r\np1 = Param("TL 1 Periods", 20, 5, 50, 1);\r\np2 = Param("TL 2 Periods", 5, 3, 25, 1);\r\nTL1 = LinearReg(C, p1);\r\nTL2 = EMA(TL1, p2);\r\nCol1 = IIf(TL1 &gt; TL2, ParamColor("TL Up Colour", colorBrightGreen), ParamColor("TL Dn Colour", colorRed));\r\nPlot(TL1, "TriggerLine 1", Col1, styleLine|styleThick|styleNoLabel);\r\nPlot(TL2, "TriggerLine 2", Col1, styleLine|styleThick|styleNoLabel);\r\n\r\n\r\ndist = 1.1*ATR(10);\r\ndist1 = 1.4*ATR(10);\r\n\r\n\r\nDayH = TimeFrameGetPrice("H", inDaily, -1);    // yesterdays high\r\nDayL = TimeFrameGetPrice("L", inDaily, -1);       // yesterdays low\r\nDayC = TimeFrameGetPrice("C", inDaily, -1);    // yesterdays close\r\nDayO = TimeFrameGetPrice("O", inDaily);    // current day open\r\nDayH2= TimeFrameGetPrice("H", inDaily, -2);  // Two days before high\r\nDayL2= TimeFrameGetPrice("L", inDaily, -2);  // Two days before low\r\nDayH3= TimeFrameGetPrice("H", inDaily, -3);  // Three days before high\r\nDayL3= TimeFrameGetPrice("L", inDaily, -3);  // Three days before low\r\n\r\nPP = (DayL + DayH + DayC)/3;\r\n\r\nppl = ParamToggle("Pivot Levels","Show|Hide",1);\r\nif(ppl==1) {\r\nPlot(PP, "PP",colorYellow,styleDots|styleNoLine|styleNoRescale|styleNoTitle);\r\n}\r\n\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\n\r\n\r\n\r\n//////////////////////////////////////////\r\n//Calculates Seconds Left for New Bar  //\r\n/////////////////////////////////////////\r\n\r\n\r\nfunction GetSecondNum()\r\n{\r\nTime = Now( 4 );\r\nSeconds = int( Time % 100 );\r\nMinutes = int( Time / 100 % 100 );\r\nHours = int( Time / 10000 % 100 );\r\nSecondNum = int( Hours * 60 * 60 + Minutes * 60 + Seconds );\r\nreturn SecondNum;\r\n}\r\nRequestTimedRefresh( 1 );\r\nTimeFrame = Interval();\r\nSecNumber = GetSecondNum();\r\nNewperiod = SecNumber % TimeFrame == 0;\r\nSecsLeft = SecNumber - int( SecNumber / TimeFrame ) * TimeFrame;\r\nSecsToGo = TimeFrame - SecsLeft;\r\n\r\nx=Param("xposn",50,0,1000,1);\r\ny=Param("yposn",380,0,1000,1);\r\n\r\nGfxSelectSolidBrush( ColorRGB( 230, 230, 230 ) );\r\nGfxSelectPen( ColorRGB( 230, 230, 230 ), 2 );\r\nif ( NewPeriod )\r\n{\r\nGfxSelectSolidBrush( colorYellow );\r\nGfxSelectPen( colorYellow, 2 );\r\n/*Say( "New period" );*/\r\n}\r\n//GfxRoundRect( x+45, y+40, x-3, y-2, 0, 0 );\r\n//GfxSetBkMode(1);\r\n/*GfxSelectFont( "Arial", 14, 700, False );\r\nGfxSetTextColor( colorRed );\r\nGfxTextOut( "Time Left for next Bar :   "  + SecsToGo+" sec"+"", x, y ); ;*/\r\n////////////////////////////////////////////\r\n\r\n//=================TITLE================================================================================================\r\n_SECTION_BEGIN("Title");\r\nif( Status("action") == actionIndicator )\r\n\r\n/*WriteIf (Buy , " GO LONG / Reverse Signal at "+C+"  ","")+\r\nWriteIf (Sell , " EXIT LONG / Reverse Signal at "+C+"  ","")+"\\n"+EncodeColor(colorYellow)+\r\n\r\nWriteIf(Long AND NOT Buy, "Trade : Buy @ "+(BuyPrice),"")+\r\nWriteIf(shrt AND NOT Sell, "Trade : Sell @ "+(SellPrice),"")+"\\n"+\r\nWriteIf(Long AND NOT Buy, "Current Profit/Loss = Rs."+(C-BuyPrice)*500+"","")+\r\nWriteIf(shrt AND NOT Sell, "Current Profit/Loss = Rs."+(SellPrice-C)*500+"",""));*/\r\n//PlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0, L, Offset=-40);\r\n//PlotShapes(IIf(Buy, shapeSquare, shapeNone),colorLime, 0,L, Offset=-50);                      \r\n//PlotShapes(IIf(Buy, shapeUpArrow, shapeNone),colorWhite, 0,L, Offset=-45);\r\n//PlotShapes(IIf(Sell, shapeSquare, shapeNone),colorRed, 0, H, Offset=40);\r\n//PlotShapes(IIf(Sell, shapeSquare, shapeNone),colorOrange, 0,H, Offset=50);                      \r\n//PlotShapes(IIf(Sell, shapeDownArrow, shapeNone),colorWhite, 0,H, Offset=-45);\r\n//AlertIf( Buy, "SOUND C:\\\\Windows\\\\Media\\\\Ringin.wav", "Audio alert", 1 );\r\n//AlertIf( Sell, "SOUND C:\\\\Windows\\\\Media\\\\Ringin.wav", "Audio alert", 2 );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//////////////////////////////////////////\r\n/////////////////////////////////////////\r\n\r\ntrend[0]=1;\r\nTrendUp=TrendDown=Null;\r\n\r\nTrendSL=IIf(trend==1,TrendUp,TrendDown);\r\n\r\nfor(i=BarCount-1;i&gt;1;i--)\r\n{\r\nif(Buy[i] == 1)\r\n{\r\nentry = C[i];\r\nsig = "BUY";\r\nsl = TrendSL[i];\r\ntar1 = entry + (entry * .0622);\r\ntar2 = entry + (entry * .1052);\r\ntar3 = entry + (entry * .1632);\r\n \r\nbars = i;\r\ni = 0;\r\n}\r\n}\r\nOffset = 20;\r\nClr = IIf(sig == "BUY", colorLime, colorRed);\r\nssl = IIf(bars == BarCount-1, TrendSL[BarCount-1], Ref(TrendSL, -1));\r\nsl = ssl[BarCount-1];\r\n \r\n\r\nPlot(LineArray(bars-Offset, tar1, BarCount, tar1,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar2, BarCount, tar2,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, tar3, BarCount, tar3,1), "", Clr, styleLine|styleDots, Null, Null, Offset);\r\nPlot(LineArray(bars-Offset, entry, BarCount, entry,1), "", colorWhite, styleLine|styleDots, Null, Null, Offset);\r\n\r\n//Plot(TrendSL,"",colorCustom10,styleLine|styleDashed);}\r\n\r\n\r\n//Plot(LineArray(bars-Offset, sl, BarCount, sl,1), "", colorDarkRed, styleLine|styleLine, Null, Null, Offset);\r\n//Plot(LineArray(bars-Offset, entry, BarCount, entry,1), "", colorGreen, styleLine|styleLine, Null, Null, Offset);\r\n \r\nfor (i=bars; i &lt;BarCount;i++)\r\n{\r\n/*PlotText(""+sig+"@"+entry, BarCount+1,entry,Null,colorGreen);\r\nPlotText("T1@"+tar1,BarCount+3,tar1,Null,Clr);\r\nPlotText("T2@"+tar2,BarCount+3,tar2,Null,Clr);\r\nPlotText ("T3@"+tar3,BarCount+3,tar3,Null,Clr);*/\r\n\r\nPlotText("T1",BarCount+3,tar1,Null,Clr);\r\nPlotText("T2",BarCount+3,tar2,Null,Clr);\r\nPlotText ("T3",BarCount+3,tar3,Null,Clr);\r\n \r\n}\r\n messageboard = ParamToggle("Message Board","Show|Hide",0);\r\n \r\n Offset = 20;\r\n Clr = IIf(sig == "BUY", colorLime, colorRed);\r\n ssl = IIf(bars == BarCount-1, TrendSL[BarCount-1], Ref(TrendSL, -1));\r\n sl = ssl[BarCount-1];\r\n\r\n printf("Last " + sig + " Signal came " + (BarCount-bars) + " bars ago");\r\n printf("\\n" + sig + " @ : " + entry + "\\nStop Loss : " + sl + " (" + WriteVal(IIf(sig == "SELL",entry-sl,sl-entry), 2.2) + ")"+ "\\nTarget_1 : " + tar1 + "\\nTarget_2 : " + tar2 + "\\nTarget_3 : " + tar3);\r\n printf("\\nCurrent P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2));\r\n\r\n if (messageboard == 0) {\r\n GfxSelectFont( "Tahoma", 13, 100 );\r\n GfxSetBkMode( 1 );\r\n GfxSetTextColor( colorWhite );\r\n\r\n if (sig =="BUY")\r\n GfxSelectSolidBrush( colorGreen ); // this is the box background color\r\n else\r\n GfxSelectSolidBrush( colorRed ); // this is the box background color\r\n\r\n pxHeight = Status( "pxchartheight" ) ;\r\n xx = Status( "pxchartwidth");\r\n Left = 600;\r\n width = 200;\r\n x = 5;\r\n x2 = 200;\r\n\r\n y = Status( "pxchartheight" );\r\n\r\nGfxSelectPen( colorGreen, 2); // broader color\r\nGfxRoundRect( x, y - 200, x2, y-10 , 37, 37 ) ;\r\nGfxTextOut( ( "Options Special"), 16, y-190) ;\r\n//GfxTextOut( ( "Trading System"), 16, y-170) ;\r\nGfxTextOut( ("" + WriteIf(sig =="BUY",sig + " @ ",sig + " @") + " : " + entry), 13, y-140);\r\nGfxTextOut( ("Trailing SL : " + TrendSL + " "), 13, y-60);\r\nGfxTextOut( ("Target:1 : " + tar1), 13, y -120);\r\nGfxTextOut( ("Target:2 : " + tar2), 13,y-100);\r\nGfxTextOut( ("Target:3 : " + tar3), 13,y-80);\r\nGfxTextOut( (Name()), 13, y -165);\r\nGfxTextOut( ("Current P/L : " + WriteVal(IIf(sig == "BUY",(C-entry),(entry-C)),2.2)), 13, y-40);;\r\nGfxTextOut( (" "),20, y -420);\r\nGfxSetBkMode(0); // transparent\r\nGfxSelectFont("Arial", 12, 400, italic = False, underline = False, True );\r\nGfxTextOut( Name(), Status("pxwidth")/2.4, Status("pxheight")/20);\r\nGfxTextOut( (""), 20, y -220);\r\n }\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0, L, Offset=-40);\r\nPlotShapes(IIf(Buy, shapeSquare, shapeNone),colorGreen, 0,L, Offset=-50);                      \r\nPlotShapes(IIf(Buy, shapeUpArrow, shapeNone),colorWhite, 0,L, Offset=-45); \r\n\r\n\r\n///////////////////////////////////////////\r\n//////////////////////////////////////////\r\n\r\n_SECTION_END();\r\n\r\n\r\n_SECTION_BEGIN("Magnified Market Price");\r\nFS=Param("Font Size",30,11,100,1);\r\nGfxSelectFont("Times New Roman", FS, 700, True ); \r\nGfxSetBkMode( colorWhite );  \r\nGfxSetTextColor( ParamColor("Color",colorGold) ); \r\nHor=Param("Horizontal Position",70,1,1200,1);\r\nVer=Param("Vertical Position",50,1,830,1); \r\nGfxTextOut(""+C, Hor , Ver );\r\nYC=TimeFrameGetPrice("C",inDaily,-1);\r\nDD=Prec(C-YC,2);\r\nxx=Prec((DD/YC)*100,2);\r\nGfxSelectFont("Times New Roman", 11, 700, True ); \r\nGfxSetBkMode( colorWhite );  \r\nGfxSetTextColor(ParamColor("Color",colorBlack) ); \r\nGfxTextOut(""+DD+"  ("+xx+"%)", Hor , Ver+45 );\r\n\r\n_SECTION_END();\r\n\r\n\r\n\r\nDayH = SelectedValue(TimeFrameGetPrice("H", inDaily));// yesterdays high \r\nDayL = SelectedValue(TimeFrameGetPrice("L", inDaily));//low \r\nDayH1 = SelectedValue(TimeFrameGetPrice("H", inDaily, -1));// yesterdays high \r\nDayL1 = SelectedValue(TimeFrameGetPrice("L", inDaily, -1));//low \r\nDayH2 = SelectedValue(TimeFrameGetPrice("H", inDaily, -2));// yesterdays high \r\nDayL2 = SelectedValue(TimeFrameGetPrice("L", inDaily, -2));//low \r\n\r\nRange = ((DayH +DayH1  +DayH2)/3 - (DayL+DayL1+DayL2)/3);\r\nsr3= (Range *0.702)+DayL;\r\nsr4= DayH-(Range *0.655);\r\n\r\n\r\n\r\n_N(Title = StrFormat(EncodeColor(colorYellow)+" {{DATE}}       OPEN - %g,       HIGH - %g,       LOW - %g,      CLOSE -%g    # 15Min Intraday / 1Hour Positional   ", O, H, L, C, SelectedValue( ROC( C, 1 ) ) ));\r\n\r\n\r\n_SECTION_BEGIN("Volume At Price");\r\nPlotVAPOverlay( Param("Lines", 300, 100, 1000, 1 ), Param("Width", 5, 1, 100, 1 ), ParamColor("Color", colorCycle ), ParamToggle("Side", "Left|Right" ) | 4*ParamToggle("Z-order", "On top|Behind", 1 ) );\r\n \r\nuptrend=PDI()&gt;MDI()AND Signal()&lt;MACD();downtrend=MDI()&gt;PDI()AND Signal()&gt;MACD();Plot( 3, "",IIf( uptrend, colorbrightGreen, IIf( downtrend, colorRed, 0 )),styleOwnScale|styleArea|styleNoLabel, -0.10, 100 );_SECTION_END();\r\n</Formula>
		</File>
		<File>
			<Path>as1.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
		<File>
			<Path>as8.exe"                                                                                                                                                                                                                                                                                                                                                                                                                                                             //</Path>
			<Formula>
			</Formula>
		</File>
	</Includes>
</Window>
